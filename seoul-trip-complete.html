<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Seoul Trip</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>??</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <style>
        :root{--primary:#ff6b6b;--bg:#f7f7f9;--white:#fff;--text:#1a1a1a;--text-sec:#888;--border:rgba(0,0,0,0.05);--shadow:0 1px 4px rgba(0,0,0,0.06);--food:#ff6b6b;--cafe:#f6b93b;--shop:#a55eea;--work:#4a90d9;--accom:#26de81;--attr:#fd9644}
        *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
        body{margin:0;font-family:'Noto Sans TC',-apple-system,sans-serif;background:var(--bg);color:var(--text);padding-bottom:56px}
        .header{background:var(--white);padding:6px 12px;position:sticky;top:0;z-index:1000;display:flex;justify-content:space-between;align-items:center;box-shadow:var(--shadow);height:44px}
        .title{font-size:1rem;font-weight:700;display:flex;align-items:center;gap:6px}
        .title svg{color:var(--primary);width:18px;height:18px}
        .search-toggle{background:transparent;border:none;cursor:pointer;padding:6px;display:flex;align-items:center;justify-content:center;position:relative;z-index:1200;flex-shrink:0}
        .search-toggle svg{color:var(--primary);width:20px;height:20px}
        .search-wrap{position:fixed;top:6px;right:12px;height:32px;background:var(--white);z-index:1200;display:none;align-items:center;border-radius:16px;border:1px solid #e0e0e0;width:32px;overflow:hidden;transition:all 0.4s cubic-bezier(0.4, 0, 0.2, 1);max-width:calc(100vw - 180px)}
        .search-wrap.show{display:flex}
        .search-wrap.open{pointer-events:auto;width:calc(100% - 24px);right:12px}
        .search-box{display:flex;align-items:center;background:transparent;padding:0 12px;gap:10px;width:100%;opacity:0;transition:opacity 0.3s ease}
        .search-wrap.open .search-box{opacity:1;transition-delay:0.15s}
        .search-box svg{color:#bbb;flex-shrink:0}
        .search-box input{border:none;outline:none;font-size:0.95rem;width:100%;background:transparent;font-family:inherit}
        .search-clear{background:#eee;border:none;width:28px;height:28px;border-radius:50%;cursor:pointer;display:none;align-items:center;justify-content:center;font-size:14px;color:#888;margin-right:8px;transition:all 0.2s ease}
        .search-clear.show{display:flex}
        .search-clear:hover{background:#ddd;transform:scale(1.1)}
        .search-close{background:transparent;border:none;cursor:pointer;padding:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0}
        .search-close svg{color:var(--text)}
        .tabs{position:sticky;top:44px;z-index:900;background:var(--white);padding:8px 0;overflow-x:auto;white-space:nowrap;box-shadow:0 2px 8px rgba(0,0,0,0.04);border-bottom:1px solid #f0f0f0}
        .tabs::-webkit-scrollbar{display:none}
        .tabs-inner{padding:0 12px}
        .tab{display:inline-flex;align-items:center;gap:4px;margin-right:6px;padding:8px 14px;background:var(--white);border-radius:16px;font-size:0.8rem;font-weight:600;color:var(--text-sec);border:none;cursor:pointer;box-shadow:var(--shadow);transition:all 0.2s ease;min-height:36px}
        .tab:hover{box-shadow:0 2px 8px rgba(0,0,0,0.1);transform:translateY(-1px)}
        .tab.active{background:var(--text);color:white;box-shadow:0 3px 10px rgba(0,0,0,0.15)}
        .tab-count{font-size:0.7rem;background:rgba(0,0,0,0.08);padding:2px 6px;border-radius:10px;min-width:18px;text-align:center}
        .tab.active .tab-count{background:rgba(255,255,255,0.25)}
        .zones{padding:8px 12px;overflow-x:auto;white-space:nowrap;background:var(--bg)}
        .zones::-webkit-scrollbar{display:none}
        .zone-pill{display:inline-block;padding:6px 12px;background:transparent;border:1px solid #ddd;border-radius:16px;font-size:0.72rem;color:#666;margin-right:6px;cursor:pointer;transition:all 0.2s ease;min-height:32px;display:inline-flex;align-items:center}
        .zone-pill:hover{border-color:#999;background:rgba(0,0,0,0.02)}
        .zone-pill.active{background:var(--text);color:white;border-color:var(--text);transform:scale(1.05)}
        .container{max-width:600px;margin:0 auto;padding:4px 12px}
        .result-info{display:none}
        .card{background:var(--white);border-radius:16px;padding:16px;margin-bottom:12px;box-shadow:0 2px 8px rgba(0,0,0,0.06);transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);position:relative;cursor:pointer;border:2px solid transparent}
        .card:hover{box-shadow:0 4px 16px rgba(0,0,0,0.12);transform:translateY(-2px)}
        .card:active{transform:scale(0.98);border-color:var(--primary)}
        .card-badges{display:flex;gap:6px;margin-bottom:10px}
        .badge-cat{font-size:0.68rem;padding:4px 10px;border-radius:10px;font-weight:600;color:white}
        .badge-zone{font-size:0.68rem;padding:4px 10px;border-radius:10px;background:#e8e8ea;color:#555;font-weight:600}
        .cat-蝢?,.cat-?拙?擗background:var(--food)}
        .cat-???{background:var(--cafe)}
        .cat-鞈潛,.cat-?貊,.cat-?ˇ,.cat-敶拙?,.cat-?疏{background:var(--shop)}
        .cat-Work,.cat-撅汗,.cat-撌乩??{background:var(--work)}
        .cat-雿挪{background:var(--accom)}
        .cat-?舫?{background:var(--attr)}

        /* Today's Picks Section */
        .today-picks{padding:16px 12px;background:linear-gradient(135deg, #fff5f5 0%, #fff 100%)}
        .today-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
        .today-title{font-size:1.1rem;font-weight:700;color:var(--text);display:flex;align-items:center;gap:6px}
        .today-title svg{color:var(--primary)}
        .today-date{font-size:0.75rem;color:var(--text-sec);font-weight:600}
        .today-cards{display:flex;gap:12px;overflow-x:auto;padding-bottom:8px;scroll-snap-type:x mandatory}
        .today-cards::-webkit-scrollbar{display:none}
        .today-card{flex:0 0 280px;background:white;border-radius:16px;padding:14px;box-shadow:0 2px 12px rgba(0,0,0,0.08);scroll-snap-align:start;border:2px solid transparent;transition:all 0.3s ease}
        .today-card:active{transform:scale(0.97);border-color:var(--primary)}
        .today-card-header{display:flex;gap:10px;margin-bottom:10px}
        .today-card-emoji{font-size:2rem;flex-shrink:0}
        .today-card-info{flex:1;min-width:0}
        .today-card-name{font-size:0.95rem;font-weight:700;color:var(--text);margin-bottom:2px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
        .today-card-zone{font-size:0.7rem;color:var(--text-sec);font-weight:600}
        .today-card-highlight{background:linear-gradient(135deg,#fff9e6 0%,#fff 100%);border-radius:10px;padding:8px 10px;font-size:0.8rem;color:#d97706;line-height:1.4;margin-top:8px;border-left:3px solid #f59e0b}
        
        /* Quick Actions */
        .quick-actions{padding:12px;background:var(--white);display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
        .quick-action{display:flex;flex-direction:column;align-items:center;gap:6px;padding:12px 8px;background:var(--bg);border-radius:14px;text-decoration:none;color:var(--text);transition:all 0.2s ease;min-height:80px;justify-content:center}
        .quick-action:active{transform:scale(0.95);background:#e8e8ea}
        .quick-action-icon{width:32px;height:32px;background:linear-gradient(135deg, var(--primary) 0%, #ff8787 100%);border-radius:10px;display:flex;align-items:center;justify-content:center}
        .quick-action-icon svg{width:18px;height:18px;color:white}
        .quick-action-label{font-size:0.7rem;font-weight:600;text-align:center;line-height:1.2}
        
        /* Section Divider */
        .section-divider{height:8px;background:var(--bg)}

        /* Place Detail Modal */
        .modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);z-index:2000;display:none;align-items:flex-end;animation:fadeIn 0.3s ease}
        .modal-overlay.show{display:flex}
        @keyframes fadeIn{from{opacity:0}to{opacity:1}}
        
        .modal-content{width:100%;max-height:85vh;background:white;border-radius:20px 20px 0 0;overflow:hidden;transform:translateY(100%);transition:transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)}
        .modal-overlay.show .modal-content{transform:translateY(0)}
        
        .modal-header{padding:16px;background:var(--bg);position:sticky;top:0;z-index:10;display:flex;justify-content:space-between;align-items:center}
        .modal-close{background:white;border:none;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,0.1)}
        .modal-close svg{width:20px;height:20px}
        
        .modal-body{padding:20px;overflow-y:auto;max-height:calc(85vh - 68px)}
        .modal-place-name{font-size:1.4rem;font-weight:700;color:var(--text);margin-bottom:6px}
        .modal-place-name-kr{font-size:1rem;color:var(--text-sec);margin-bottom:16px;font-weight:600}
        .modal-badges{display:flex;gap:8px;margin-bottom:16px;flex-wrap:wrap}
        .modal-info-grid{display:grid;gap:12px;margin-bottom:20px}
        .modal-info-item{display:flex;align-items:flex-start;gap:10px;padding:12px;background:var(--bg);border-radius:12px}
        .modal-info-icon{width:24px;height:24px;flex-shrink:0;color:var(--primary)}
        .modal-info-text{flex:1;font-size:0.9rem;color:var(--text);line-height:1.5}
        .modal-actions{position:sticky;bottom:0;padding:16px;background:white;border-top:1px solid #f0f0f0;display:flex;gap:8px}
        .modal-btn{flex:1;padding:14px;border-radius:14px;font-weight:700;font-size:0.9rem;border:none;cursor:pointer;transition:all 0.2s ease;display:flex;align-items:center;justify-content:center;gap:6px}
        .modal-btn-favorite{background:#fff3f3;color:var(--primary);border:2px solid var(--primary)}
        .modal-btn-favorite.active{background:var(--primary);color:white}
        .modal-btn-navigate{background:var(--primary);color:white;box-shadow:0 4px 12px rgba(255,107,107,0.3)}
        .modal-btn:active{transform:scale(0.97)}

        /* Favorite System */
        .favorite-btn{position:absolute;top:12px;right:12px;width:36px;height:36px;background:rgba(255,255,255,0.95);backdrop-filter:blur(10px);border-radius:50%;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10;box-shadow:0 2px 8px rgba(0,0,0,0.1);transition:all 0.2s ease}
        .favorite-btn:active{transform:scale(0.9)}
        .favorite-btn svg{width:20px;height:20px;color:#ccc;transition:all 0.2s ease}
        .favorite-btn.active svg{color:var(--primary);fill:var(--primary)}
        .favorite-badge{position:absolute;top:8px;right:8px;background:linear-gradient(135deg, #ff6b6b 0%, #ff8787 100%);color:white;font-size:0.65rem;font-weight:700;padding:3px 8px;border-radius:10px;box-shadow:0 2px 6px rgba(255,107,107,0.4)}

        .name-cn{font-size:1.15rem;font-weight:700;margin-bottom:4px;color:var(--text);letter-spacing:-0.3px;line-height:1.3}
        .name-kr{font-size:0.8rem;color:#999;margin-bottom:12px;font-weight:500}
        .info{font-size:0.8rem;color:#666;margin-bottom:4px}
        .must{background:linear-gradient(135deg,#fffbeb 0%,#fef3c7 100%);border-left:4px solid #f59e0b;border-radius:12px;padding:14px;margin:12px 0;box-shadow:0 2px 6px rgba(245,158,11,0.15)}
        .must-title{font-size:0.72rem;font-weight:700;color:#d97706;margin-bottom:6px}
        .must-text{font-size:0.88rem;color:#1a1a1a;line-height:1.6;font-weight:500}
        .price{display:inline-block;background:white;color:#666;font-size:0.72rem;padding:4px 10px;border-radius:8px;margin-top:8px}
        .actions{margin-top:14px;display:flex;gap:8px}
        .btn{flex:1;padding:12px;text-align:center;border-radius:12px;font-weight:600;text-decoration:none;font-size:0.82rem;transition:all 0.2s ease;min-height:44px;display:flex;align-items:center;justify-content:center}
        .btn-g{background:#e3f2fd;color:#1976d2}
        .btn-g:hover{background:#bbdefb}
        .btn-g:active{transform:scale(0.97)}
        .btn-n{background:#e8f5e9;color:#2e7d32}
        .btn-n:hover{background:#c8e6c9}
        .btn-n:active{transform:scale(0.97)}
        .nav{position:fixed;bottom:0;left:0;right:0;background:var(--white);border-top:1px solid var(--border);display:flex;justify-content:space-around;padding:3px 0 calc(3px + env(safe-area-inset-bottom));z-index:1100}
        .nav-item{display:flex;flex-direction:column;align-items:center;padding:8px 20px;color:#c0c0c0;text-decoration:none;background:none;border:none;cursor:pointer;min-height:44px;justify-content:center}
        .nav-item.active{color:var(--primary)}
        .nav-item svg{margin-bottom:2px;width:20px;height:20px}
        .nav-label{font-size:0.65rem;font-weight:600}
        .page{display:none}
        .page.active{display:block}
        .placeholder{display:flex;align-items:center;justify-content:center;height:70vh;color:#888;text-align:center;flex-direction:column}
        .schedule-tabs{display:flex;overflow-x:auto;background:var(--white);padding:12px 16px;gap:8px;position:sticky;top:60px;z-index:500;border-bottom:1px solid #f0f0f0}
        .schedule-tabs::-webkit-scrollbar{display:none}
        .schedule-tab{flex-shrink:0;padding:10px 16px;background:var(--white);border:2px solid #e0e0e0;border-radius:12px;font-size:0.85rem;font-weight:600;color:var(--text-sec);cursor:pointer;text-align:center;transition:all 0.2s ease}
        .schedule-tab span{display:block;font-size:0.75rem;margin-top:4px;color:#999}
        .schedule-tab.active{background:var(--primary);color:white;border-color:var(--primary)}
        .schedule-tab.active span{color:rgba(255,255,255,0.9)}
        .schedule-content{padding:16px}
        .schedule-day{display:none}
        .schedule-day.active{display:block}
        .day-title{font-size:1.1rem;font-weight:700;color:var(--text);margin-bottom:16px;padding-bottom:8px;border-bottom:2px solid var(--primary)}
        .schedule-item{display:flex;gap:16px;margin-bottom:20px;padding:16px;background:var(--white);border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.06)}
        .schedule-item .time{flex-shrink:0;width:70px;font-size:0.85rem;font-weight:600;color:var(--primary);padding-top:2px}
        .schedule-item .content{flex:1}
        .event-title{font-size:1rem;font-weight:600;color:var(--text);margin-bottom:6px}
        .event-detail{font-size:0.85rem;color:var(--text-sec);margin-bottom:3px}
        .schedule-item.flight{border-left:4px solid #4285f4}
        .schedule-item.work{border-left:4px solid #a55eea}
        .schedule-item.special{border-left:4px solid #ff6b6b}
        .schedule-item.free{border-left:4px solid #26de81}
        .footer{text-align:center;padding:24px;color:#ccc;font-size:0.72rem}
        #map-wrap{position:fixed;top:0;left:0;width:100%;height:calc(100% - 56px);background:white;z-index:800;display:none}
        #map-wrap.active{display:block}
        #map{width:100%;height:100%}
        .map-sidebar{display:none}
        
        .bottom-sheet{position:fixed;bottom:0;left:0;right:0;background:var(--white);border-radius:20px 20px 0 0;box-shadow:0 -4px 16px rgba(0,0,0,0.15);z-index:900;transition:transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);will-change:transform}
        .bottom-sheet.collapsed{transform:translateY(calc(100% - 80px))}
        .bottom-sheet.half{transform:translateY(60%)}
        .bottom-sheet.expanded{transform:translateY(0)}
        
        .sheet-handle-area{padding:12px 20px;cursor:pointer;position:relative}
        .sheet-handle{width:48px;height:5px;background:#c0c0c0;border-radius:3px;margin:0 auto 12px;transition:all 0.2s ease}
        .sheet-handle-area:active .sheet-handle{width:56px;background:#a0a0a0}
        .sheet-title{font-size:1rem;font-weight:700;color:var(--text);display:flex;align-items:center;gap:8px}
        .sheet-count{font-size:0.85rem;color:var(--text-sec);font-weight:600}
        
        .map-list{overflow-y:auto;max-height:calc(100vh - 180px);padding:0 0 100px}
        
        @media (min-width:769px){
            .bottom-sheet{display:none}
            .map-sidebar{display:flex;width:100%;max-width:360px;height:100%;background:var(--white);border-right:1px solid #e0e0e0;overflow-y:auto;flex-direction:column;position:relative;z-index:850}
            #map-wrap.active{display:flex}
            .map-list{padding:56px 0 12px;max-height:none}
        }
        .map-list-item{padding:14px 16px;border-bottom:1px solid #f0f0f0;cursor:pointer;transition:all 0.2s ease}
        .map-list-item:hover{background:#f7f7f9;padding-left:18px}
        .map-list-item:active{background:#efefef}
        .map-list-item.active{background:#fff8f0;border-left:3px solid var(--primary)}
        .map-item-name{font-size:0.95rem;font-weight:600;color:var(--text);margin-bottom:4px}
        .map-item-info{font-size:0.8rem;color:var(--text-sec);margin-bottom:6px}
        .map-item-links{display:flex;gap:8px}
        .map-item-link{width:36px;height:36px;border-radius:10px;display:flex;align-items:center;justify-content:center;background:#f7f7f9;transition:all 0.2s ease;text-decoration:none}
        .map-item-link:hover{background:#e0e0e0;transform:translateY(-2px);box-shadow:0 2px 6px rgba(0,0,0,0.1)}
        .map-item-link:active{transform:translateY(0)}
        .map-item-link svg{width:18px;height:18px}
        .map-controls{position:absolute;top:56px;left:12px;right:12px;z-index:2000;display:flex;gap:8px;flex-wrap:wrap;pointer-events:none}
        .map-controls *{pointer-events:auto}
        .map-filter{position:relative}
        .map-filter-btn{padding:10px 16px;background:var(--white);border:none;border-radius:20px;font-size:0.9rem;font-weight:600;color:var(--text);cursor:pointer;display:flex;align-items:center;gap:8px;font-family:inherit;min-width:160px;box-shadow:0 2px 8px rgba(0,0,0,0.08)}
        .map-filter-btn svg{width:16px;height:16px;transition:transform 0.3s ease}
        .map-filter-btn.open svg{transform:rotate(180deg)}
        .map-filter-dropdown{position:absolute;top:calc(100% + 8px);left:0;background:var(--white);border:none;border-radius:12px;min-width:160px;display:none;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,0.08)}
        .map-filter-dropdown.show{display:block}
        .map-filter-option{padding:10px 16px;cursor:pointer;font-size:0.9rem;font-weight:500;display:flex;align-items:center;gap:8px;color:var(--text);transition:background 0.2s ease}
        .map-filter-option:hover{background:#f7f7f9}
        .map-filter-option.active{background:var(--text);color:white}
        .map-btn{padding:8px 14px;background:white;border:none;border-radius:20px;font-size:0.8rem;font-weight:600;color:#666;box-shadow:0 2px 8px rgba(0,0,0,0.15);cursor:pointer}
        .map-btn.active{background:var(--text);color:white}
        .locate-btn{position:absolute;bottom:90px;right:16px;width:44px;height:44px;background:white;border:none;border-radius:50%;box-shadow:0 2px 8px rgba(0,0,0,0.2);cursor:pointer;z-index:1000;display:flex;align-items:center;justify-content:center}
        .custom-marker{width:28px;height:28px;border-radius:50% 50% 50% 0;transform:rotate(-45deg);display:flex;align-items:center;justify-content:center;box-shadow:0 2px 6px rgba(0,0,0,0.3);border:2px solid white}
        .custom-marker span{transform:rotate(45deg);font-size:12px}
        .marker-蝢?,.marker-?拙?擗background:#ff6b6b}
        .marker-???{background:#f6b93b}
        .marker-鞈潛,.marker-?ˇ,.marker-?貊,.marker-敶拙?,.marker-?疏{background:#a55eea}
        .marker-Work,.marker-撌乩??,.marker-撅汗{background:#4a90d9}
        .marker-雿挪{background:#26de81}
        .marker-?舫?{background:#fd9644}
        .my-marker{width:16px;height:16px;background:#4285f4;border:3px solid white;border-radius:50%;box-shadow:0 2px 6px rgba(66,133,244,0.5)}
        .leaflet-popup-content-wrapper{border-radius:12px}
        .popup-nav{display:block;margin-top:8px;background:#03C75A;color:white;text-align:center;padding:8px;border-radius:8px;text-decoration:none;font-size:0.8rem;font-weight:600}

        .skeleton{background:linear-gradient(90deg,#f0f0f0 25%,#e8e8e8 50%,#f0f0f0 75%);background-size:200% 100%;animation:loading 1.5s ease-in-out infinite}
        @keyframes loading{0%{background-position:200% 0}100%{background-position:-200% 0}}
        .skeleton-card{height:200px;border-radius:14px;margin-bottom:10px}
        .loading-spinner{display:inline-block;width:20px;height:20px;border:3px solid rgba(255,107,107,0.2);border-top-color:var(--primary);border-radius:50%;animation:spin 0.8s linear infinite}
        @keyframes spin{to{transform:rotate(360deg)}}
        .empty{text-align:center;padding:80px 20px;color:var(--text-sec)}
        .empty svg{opacity:0.2;margin-bottom:16px}
        .empty p{font-size:0.9rem;color:#999;margin-top:8px}

        
        
        /* Optimized Schedule Styles */
        .schedule-wrapper{background:linear-gradient(180deg, #fafafa 0%, #f5f5f7 100%);min-height:100vh}
        .schedule-header{padding:8px 12px 6px;background:var(--white);position:sticky;top:44px;z-index:800;box-shadow:0 2px 8px rgba(0,0,0,0.04)}
        .schedule-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
        .schedule-date{font-size:0.8rem;color:var(--text-sec);font-weight:500}
        .today-btn{padding:6px 14px;background:var(--primary);color:white;border:none;border-radius:18px;font-size:0.75rem;font-weight:700;cursor:pointer;transition:all 0.2s ease;box-shadow:0 2px 6px rgba(255,107,107,0.3);letter-spacing:0.3px}
        .today-btn:hover{box-shadow:0 3px 10px rgba(255,107,107,0.4);transform:translateY(-1px)}
        .today-btn:active{transform:scale(0.95);box-shadow:0 1px 3px rgba(255,107,107,0.2)}
        .schedule-today{font-size:1.5rem;font-weight:700;color:var(--text);margin-bottom:6px;letter-spacing:-0.5px}
        .week-calendar{display:flex;gap:6px;overflow-x:auto;padding-bottom:6px;scroll-behavior:smooth}
        .week-calendar::-webkit-scrollbar{display:none}
        .week-day{flex-shrink:0;text-align:center;min-width:44px;cursor:pointer;transition:all 0.25s cubic-bezier(0.4, 0, 0.2, 1);padding:6px 4px;border-radius:10px}
        .week-day:hover{background:rgba(0,0,0,0.02)}
        .week-day-label{font-size:0.7rem;color:var(--text-sec);margin-bottom:4px;font-weight:600;letter-spacing:0.3px;text-transform:uppercase}
        .week-day-num{font-size:0.95rem;font-weight:700;color:var(--text);width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;margin:0 auto;transition:all 0.25s ease}
        .week-day.active .week-day-label{color:var(--primary)}
        .week-day.active .week-day-num{background:var(--primary);color:white;box-shadow:0 2px 8px rgba(255,107,107,0.3)}
        .week-day.today .week-day-num{border:2px solid var(--primary)}
        .week-day-dot{width:4px;height:4px;background:var(--primary);border-radius:50%;margin:6px auto 0;opacity:0;transition:opacity 0.2s ease}
        .week-day.active .week-day-dot{opacity:1}
        
        .schedule-content{padding:0;background:transparent;position:relative;touch-action:pan-y}
        .hourly-schedule{padding:12px 0 80px;max-width:600px;margin:0 auto}
        .current-time-line{position:absolute;left:80px;right:20px;height:2px;background:var(--primary);z-index:100;pointer-events:none;box-shadow:0 0 8px rgba(255,107,107,0.4)}
        .current-time-line::before{content:'';position:absolute;left:-6px;top:-4px;width:10px;height:10px;background:var(--primary);border-radius:50%;box-shadow:0 0 0 3px rgba(255,107,107,0.2)}
        .current-time-label{position:absolute;left:12px;top:-10px;background:var(--primary);color:white;font-size:0.7rem;padding:2px 8px;border-radius:10px;font-weight:700;white-space:nowrap}
        
        .hour-block{display:flex;gap:12px;position:relative;height:80px}
        .hour-block.past{opacity:0.5}
        .hour-time{flex-shrink:0;width:60px;padding:4px 12px 0 12px;font-size:0.85rem;font-weight:700;color:var(--text-sec);text-align:right;position:sticky;top:100px;z-index:10}
        .hour-line{position:relative;flex:1;padding:0 16px 0 0}
        .hour-line::before{content:'';position:absolute;left:0;top:8px;height:calc(100% - 8px);width:1px;background:linear-gradient(180deg, #e5e5e5 0%, #f0f0f0 100%)}
        .hour-dot{position:absolute;left:-4px;top:8px;width:8px;height:8px;border-radius:50%;background:#d0d0d0;z-index:1;transition:all 0.2s ease;border:2px solid var(--bg)}
        .hour-block:hover .hour-dot{background:var(--primary);transform:scale(1.3)}
        
        .event-card{background:white;border-radius:14px;padding:14px;margin-bottom:10px;box-shadow:0 1px 3px rgba(0,0,0,0.08);transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);border-left:3px solid transparent;cursor:pointer;position:relative;overflow:auto}
        .event-card::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0) 100%);opacity:0;transition:opacity 0.3s ease}
        .event-card:hover{box-shadow:0 4px 16px rgba(0,0,0,0.12);transform:translateY(-2px) translateX(2px)}
        .event-card:hover::before{opacity:1}
        .event-card:active{transform:translateY(0) translateX(0);box-shadow:0 2px 8px rgba(0,0,0,0.1)}
        
        .event-card.flight{background:linear-gradient(135deg,#e3f2fd 0%,#f8fbff 100%);border-left-color:#2196f3}
        .event-card.work{background:linear-gradient(135deg,#f3e5f5 0%,#fdf9fe 100%);border-left-color:#9c27b0}
        .event-card.food{background:linear-gradient(135deg,#fff3e0 0%,#fffcf7 100%);border-left-color:#ff9800}
        .event-card.activity{background:linear-gradient(135deg,#e8f5e9 0%,#f7fcf8 100%);border-left-color:#4caf50}
        .event-card.special{background:linear-gradient(135deg,#fce4ec 0%,#fff8fa 100%);border-left-color:#e91e63}
        
        .event-title-text{font-size:1rem;font-weight:700;color:var(--text);margin-bottom:8px;display:flex;align-items:center;gap:6px;line-height:1.3}
        .event-title-text svg{flex-shrink:0;opacity:0.8}
        .event-meta{display:flex;align-items:center;gap:10px;flex-wrap:wrap;margin-bottom:6px}
        .event-time-detail{font-size:0.75rem;color:var(--text-sec);display:flex;align-items:center;gap:4px;font-weight:600}
        .event-time-detail svg{width:13px;height:13px;opacity:0.7}
        .event-tag{display:inline-block;padding:3px 9px;border-radius:10px;font-size:0.7rem;font-weight:700;letter-spacing:0.3px}
        .event-card.flight .event-tag{background:rgba(33,150,243,0.15);color:#1976d2}
        .event-card.work .event-tag{background:rgba(156,39,176,0.15);color:#7b1fa2}
        .event-card.food .event-tag{background:rgba(255,152,0,0.15);color:#f57c00}
        .event-card.activity .event-tag{background:rgba(76,175,80,0.15);color:#388e3c}
        .event-card.special .event-tag{background:rgba(233,30,99,0.15);color:#c2185b}
        .event-desc{font-size:0.82rem;color:var(--text-sec);line-height:1.5;margin-top:8px;opacity:0.9}
        
        .event-expanded{max-height:500px;transition:max-height 0.3s ease}
        .event-collapsed{max-height:90px;overflow:hidden}
        
        .empty-slot{background:rgba(0,0,0,0.02);border-radius:8px;padding:20px;text-align:center;color:var(--text-sec);font-size:0.8rem;margin:8px 0;border:1px dashed #e0e0e0}
        
        .no-events{text-align:center;padding:80px 20px;color:var(--text-sec)}
        .no-events svg{margin-bottom:16px;opacity:0.2}
        .no-events p{font-size:0.95rem;font-weight:500}
        
        @media (max-width: 480px){
            .hour-time{width:50px;font-size:0.8rem}
            .schedule-today{font-size:1.6rem}
            .event-card{padding:12px}
        }


    </style>
</head>
<body>
    <div class="header">
        <div class="title">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="12" cy="11" r="3"/><path d="M17.657 16.657l-4.243 4.243a2 2 0 0 1 -2.828 0l-4.243 -4.243a8 8 0 1 1 11.314 0z"/></svg>
            Seoul Trip
        </div>
        <button class="search-toggle" onclick="toggleSearch()">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        </button>
    </div>
    <div class="search-wrap" id="search-wrap">
        <div class="search-box">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
            <input type="text" id="search" placeholder="??摨???...">
            <button class="search-clear" id="clear" onclick="clearSearch()"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button>
        </div>
        <button class="search-close" onclick="toggleSearch()">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
    </div>
    <div id="page-pins" class="page active">
        <div class="tabs"><div class="tabs-inner" id="tabs"></div></div>
        <div class="zones" id="zones"></div>
        <div class="container">
            <div class="result-info" id="info"></div>
            <div id="list"></div>
        </div>
        <div class="footer">Made with 
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#ff6b6b" stroke-width="2" style="display:inline-block;vertical-align:text-bottom;margin:0 2px"><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"/></svg> for Tina
        </div>
    </div>
        <div id="page-schedule" class="page">
        <div class="schedule-wrapper">
            <div class="schedule-header">
                <div class="schedule-top">
                    <div class="schedule-date" id="schedule-current-date">Feb 23, 2026</div>
                    <button class="today-btn" onclick="jumpToToday()">Today</button>
                </div>
                <div class="schedule-today">Day <span id="schedule-day-num">1</span></div>
                <div class="week-calendar" id="week-calendar">
                    <div class="week-day active today" data-day="0">
                        <div class="week-day-label">Mon</div>
                        <div class="week-day-num">23</div>
                        <div class="week-day-dot"></div>
                    </div>
                    <div class="week-day" data-day="1">
                        <div class="week-day-label">Tue</div>
                        <div class="week-day-num">24</div>
                        <div class="week-day-dot"></div>
                    </div>
                    <div class="week-day" data-day="2">
                        <div class="week-day-label">Wed</div>
                        <div class="week-day-num">25</div>
                        <div class="week-day-dot"></div>
                    </div>
                    <div class="week-day" data-day="3">
                        <div class="week-day-label">Thu</div>
                        <div class="week-day-num">26</div>
                        <div class="week-day-dot"></div>
                    </div>
                    <div class="week-day" data-day="4">
                        <div class="week-day-label">Fri</div>
                        <div class="week-day-num">27</div>
                        <div class="week-day-dot"></div>
                    </div>
                    <div class="week-day" data-day="5">
                        <div class="week-day-label">Sat</div>
                        <div class="week-day-num">28</div>
                        <div class="week-day-dot"></div>
                    </div>
                    <div class="week-day" data-day="6">
                        <div class="week-day-label">Sun</div>
                        <div class="week-day-num">1</div>
                        <div class="week-day-dot"></div>
                    </div>
                    <div class="week-day" data-day="7">
                        <div class="week-day-label">Mon</div>
                        <div class="week-day-num">2</div>
                        <div class="week-day-dot"></div>
                    </div>
                    <div class="week-day" data-day="8">
                        <div class="week-day-label">Tue</div>
                        <div class="week-day-num">3</div>
                        <div class="week-day-dot"></div>
                    </div>
                    <div class="week-day" data-day="9">
                        <div class="week-day-label">Wed</div>
                        <div class="week-day-num">4</div>
                        <div class="week-day-dot"></div>
                    </div>
                </div>
            </div>
            <div class="schedule-content" id="schedule-content">
                <div id="timeline-container"></div>
            </div>
        </div>
    </div>
    <div id="map-wrap">
        <div class="map-sidebar">
            <div class="map-list" id="map-list-desktop"></div>
        </div>
        <div style="flex:1;position:relative;height:100%">
            <div class="map-controls">
                <div class="map-filter">
                    <button class="map-filter-btn" onclick="toggleMapFilter()" id="map-filter-btn">
                        <span id="map-filter-text"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline-block;vertical-align:text-bottom;margin-right:4px"><circle cx="12" cy="11" r="3"/><path d="M17.657 16.657l-4.243 4.243a2 2 0 0 1 -2.828 0l-4.243 -4.243a8 8 0 1 1 11.314 0z"/></svg>?券?唳?</span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
                    </button>
                    <div class="map-filter-dropdown" id="map-filter-dropdown">
                        <div class="map-filter-option active" data-value="all" data-label="?券?唳?">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline-block;vertical-align:text-bottom;margin-right:4px"><circle cx="12" cy="11" r="3"/><path d="M17.657 16.657l-4.243 4.243a2 2 0 0 1 -2.828 0l-4.243 -4.243a8 8 0 1 1 11.314 0z"/></svg>?券?唳?
                        </div>
                        <div class="map-filter-option" data-value="蝢?" data-label="蝢?">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline-block;vertical-align:text-bottom;margin-right:4px"><path d="M4 8h16a1 1 0 0 1 1 1v.5c0 1.5 -2.517 5.573 -4 6.5v1a1 1 0 0 1 -1 1h-8a1 1 0 0 1 -1 -1v-1c-1.687 -1.054 -4 -5 -4 -6.5v-.5a1 1 0 0 1 1 -1z"/><path d="M12 4a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"/></svg>蝢?
                        </div>
                        <div class="map-filter-option" data-value="???" data-label="???">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline-block;vertical-align:text-bottom;margin-right:4px"><path d="M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1"/><path d="M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"/><path d="M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"/><path d="M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z"/><path d="M16.746 16.726a3 3 0 1 0 .252 -5.555"/></svg>???
                        </div>
                        <div class="map-filter-option" data-value="鞈潛" data-label="鞈潛">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline-block;vertical-align:text-bottom;margin-right:4px"><path d="M6.331 8h11.339a2 2 0 0 1 1.977 2.304l-1.255 8.152a3 3 0 0 1 -2.966 2.544h-6.852a3 3 0 0 1 -2.965 -2.544l-1.255 -8.152a2 2 0 0 1 1.977 -2.304z"/><path d="M9 11v-5a3 3 0 0 1 6 0v5"/></svg>鞈潛
                        </div>
                        <div class="map-filter-option" data-value="Work" data-label="Work">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline-block;vertical-align:text-bottom;margin-right:4px"><rect x="3" y="5" width="18" height="14" rx="1"/><path d="M7 15v-6l2 2l2 -2v6"/><path d="M14 10h2"/><path d="M14 13h2"/></svg>Work
                        </div>
                        <div class="map-filter-option" data-value="雿挪" data-label="雿挪">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline-block;vertical-align:text-bottom;margin-right:4px"><path d="M5 12l-2 0l9 -9l9 9l-2 0l0 7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"/></svg>雿挪
                        </div>
                        <div class="map-filter-option" data-value="撅汗" data-label="撅汗">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline-block;vertical-align:text-bottom;margin-right:4px"><path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25"/><circle cx="7.5" cy="10.5" r=".5" fill="currentColor"/><circle cx="12" cy="7.5" r=".5" fill="currentColor"/><circle cx="16.5" cy="10.5" r=".5" fill="currentColor"/></svg>撅汗
                        </div>
                        <div class="map-filter-option" data-value="?舫?" data-label="?舫?">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline-block;vertical-align:text-bottom;margin-right:4px"><path d="M5 7h1a2 2 0 0 0 2 -2a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2"/><circle cx="12" cy="13" r="3"/></svg>?舫?
                        </div>
                    </div>
                </div>
            </div>
            <div id="map"></div>
            <button class="locate-btn" onclick="locate()">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#4285f4" stroke-width="2.5"><circle cx="12" cy="12" r="3"/><path d="M12 2v4m0 12v4m10-10h-4M6 12H2"/></svg>
            </button>
        </div>
        <div class="bottom-sheet collapsed" id="bottom-sheet">
            <div class="sheet-handle-area" onclick="toggleBottomSheet()">
                <div class="sheet-handle"></div>
                <div class="sheet-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="11" r="3"/><path d="M17.657 16.657l-4.243 4.243a2 2 0 0 1 -2.828 0l-4.243 -4.243a8 8 0 1 1 11.314 0z"/></svg>
                    <span id="sheet-title-text">?券?圈?</span>
                    <span class="sheet-count" id="sheet-count"></span>
                </div>
            </div>
            <div class="map-list" id="map-list"></div>
        </div>
    </div>
    <nav class="nav">
        <button class="nav-item active" onclick="go(0)">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="11" r="3"/><path d="M17.657 16.657l-4.243 4.243a2 2 0 0 1 -2.828 0l-4.243 -4.243a8 8 0 1 1 11.314 0z"/></svg>
            <span class="nav-label">?舫?</span>
        </button>
        <button class="nav-item" onclick="go(1)">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="4" y="5" width="16" height="16" rx="2"/><line x1="16" y1="3" x2="16" y2="7"/><line x1="8" y1="3" x2="8" y2="7"/><line x1="4" y1="11" x2="20" y2="11"/></svg>
            <span class="nav-label">銵?</span>
        </button>
        <button class="nav-item" onclick="go(2)">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"/><line x1="9" y1="3" x2="9" y2="18"/><line x1="15" y1="6" x2="15" y2="21"/></svg>
            <span class="nav-label">?啣?</span>
        </button>
    </nav>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>

var SCHEDULE_HOURLY = {
    0: [ // Day 1
        {hour: 18, duration: 3.5, title: '獢? ??隞?', desc: 'TR 896 [Scoot B787-9]\nTaoyuan Intl Airport Terminal 1', tag: '?芰', type: 'flight', icon: 'plane'}
    ],
    1: [ // Day 2
        {hour: 10, duration: 10, title: '撌乩???, desc: 'Tina & Bian 撌乩???\n13:00 ??', tag: '撌乩?', type: 'work', icon: 'briefcase'}
    ],
    2: [ // Day 3
        {hour: 10, duration: 10, title: '撌乩???, desc: 'Tina & Bian 撌乩???\n13:00 ??', tag: '撌乩?', type: 'work', icon: 'briefcase'}
    ],
    3: [ // Day 4
        {hour: 10, duration: 8, title: 'Free Day', desc: '?芰銵?嚗????, tag: '?芰瘣餃?', type: 'activity', icon: 'confetti'}
    ],
    4: [ // Day 5
        {hour: 10, duration: 10, title: '?? / ??+憭', desc: '?Ｙ揣擐?喟絞?隞?, tag: '閫??, type: 'activity', icon: 'lantern'}
    ],
    5: [ // Day 6
        {hour: 9, duration: 10, title: 'Eobi ?啗健 & ?∪雀', desc: '銝?仿?銵?', tag: '?嗅?瘣餃?', type: 'activity', icon: 'mountain'}
    ],
    6: [ // Day 7
        {hour: 9, duration: 1, title: '?', desc: '蝝?撠?頠?', tag: '鈭日?, type: 'activity', icon: 'car'},
        {hour: 11, duration: 3, title: 'Wedding', desc: '憍旨?貊旨', tag: '?孵瘣餃?', type: 'special', icon: 'church'},
        {hour: 15, duration: 4, title: '隞? or ??', desc: '?芰瘣餃???', tag: '鞈潛', type: 'activity', icon: 'shopping-bag'}
    ],
    7: [ // Day 8
        {hour: 9, duration: 10, title: '?楝 38 摨衣?', desc: 'DMZ 銝?仿?', tag: '閫??, type: 'activity', icon: 'world'}
    ],
    8: [ // Day 9
        {hour: 10, duration: 8, title: '?拙像????, desc: '擃??喟絞??', tag: '??擃?', type: 'activity', icon: 'building-monument'}
    ],
    9: [ // Day 10
        {hour: 10, duration: 10, title: '?? + ?敺鞈?, desc: '皞??振??, tag: '鞈潛', type: 'activity', icon: 'shopping-bag'},
        {hour: 23, duration: 1.75, title: '隞? ??獢?', desc: 'TR 897 [Scoot B787-9]\nIncheon Intl Terminal 1', tag: '?芰', type: 'flight', icon: 'plane'}
    ]
};

var ICONS = {
    'plane': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 10h4a2 2 0 0 1 0 4h-4l-4 7h-3l2 -7h-4l-2 2h-3l2 -4l-2 -4h3l2 2h4l-2 -7h3z"/></svg>',
    'plane-arrival': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 12h5a2 2 0 0 1 0 4h-15l-3 6h-2l2 -8h-2l-2 2h-2l2 -4l-2 -4h2l2 2h2l-2 -8h2l3 6h10a2 2 0 0 1 0 4h-5z"/></svg>',
    'home': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12l-2 0l9 -9l9 9l-2 0l0 7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"/></svg>',
    'briefcase': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 7m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"/><path d="M8 7v-2a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v2"/><path d="M12 12l0 .01"/><path d="M3 13a20 20 0 0 0 18 0"/></svg>',
    'bowl': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 8h16a1 1 0 0 1 1 1v.5c0 1.5 -2.517 5.573 -4 6.5v1a1 1 0 0 1 -1 1h-8a1 1 0 0 1 -1 -1v-1c-1.687 -1.054 -4 -5 -4 -6.5v-.5a1 1 0 0 1 1 -1z"/><path d="M12 4a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"/></svg>',
    'confetti': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 5h2"/><path d="M5 4v2"/><path d="M11.5 4l-.5 2"/><path d="M18 5h2"/><path d="M19 4v2"/><path d="M15 9l-1 1"/><path d="M18 13l2 -.5"/><path d="M18 19h2"/><path d="M19 18v2"/><path d="M14 16.518l-6.518 -6.518l-4.39 9.58a1 1 0 0 0 1.329 1.329l9.579 -4.39z"/></svg>',
    'lantern': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 2h6l3 7l-3 7h-6l-3 -7z"/><path d="M12 16v4"/><path d="M10 20h4"/></svg>',
    'mountain': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 20h18l-6.921 -14.612a2.3 2.3 0 0 0 -4.158 0l-6.921 14.612z"/><path d="M7.5 11l2 2.5l2.5 -2.5l2 3l2.5 -2"/></svg>',
    'car': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="7" cy="17" r="2"/><circle cx="17" cy="17" r="2"/><path d="M5 17h-2v-6l2 -5h9l4 5h1a2 2 0 0 1 2 2v4h-2m-4 0h-6m-6 -6h15m-6 0v-5"/></svg>',
    'church': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 21h18"/><path d="M10 21v-4a2 2 0 0 1 2 -2h0a2 2 0 0 1 2 2v4"/><path d="M10 5l2 -2l2 2"/><path d="M6 21v-7m-2 2l8 -8l8 8m-2 -2v7"/></svg>',
    'shopping-bag': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6.331 8h11.339a2 2 0 0 1 1.977 2.304l-1.255 8.152a3 3 0 0 1 -2.966 2.544h-6.852a3 3 0 0 1 -2.965 -2.544l-1.255 -8.152a2 2 0 0 1 1.977 -2.304z"/><path d="M9 11v-5a3 3 0 0 1 6 0v5"/></svg>',
    'world': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="9"/><path d="M3.6 9h16.8"/><path d="M3.6 15h16.8"/><path d="M11.5 3a17 17 0 0 0 0 18"/><path d="M12.5 3a17 17 0 0 1 0 18"/></svg>',
    'building-monument': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 19h14a2 2 0 0 0 2 -2v-10a2 2 0 0 0 -2 -2h-14a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2z"/><path d="M6 16h12"/><path d="M9 5v-2"/><path d="M15 5v-2"/><path d="M9 19v2"/><path d="M15 19v2"/><path d="M4 8h16"/></svg>',
    'clock': '<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="9"/><path d="M12 7v5l3 3"/></svg>'
};

var DAY_INFO = [
    {date: 'Feb 23, 2026', day: 'Monday'},
    {date: 'Feb 24, 2026', day: 'Tuesday'},
    {date: 'Feb 25, 2026', day: 'Wednesday'},
    {date: 'Feb 26, 2026', day: 'Thursday'},
    {date: 'Feb 27, 2026', day: 'Friday'},
    {date: 'Feb 28, 2026', day: 'Saturday'},
    {date: 'Mar 1, 2026', day: 'Sunday'},
    {date: 'Mar 2, 2026', day: 'Monday'},
    {date: 'Mar 3, 2026', day: 'Tuesday'},
    {date: 'Mar 4, 2026', day: 'Wednesday'}
];

function formatHour(h) {
    return (h < 10 ? '0' : '') + h + ':00';
}

function renderHourlySchedule(dayIndex) {
    var container = document.getElementById('timeline-container');
    var events = SCHEDULE_HOURLY[dayIndex] || [];
    
    if (events.length === 0) {
        container.innerHTML = '<div class="no-events"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="4" y="5" width="16" height="16" rx="2"/><line x1="16" y1="3" x2="16" y2="7"/><line x1="8" y1="3" x2="8" y2="7"/><line x1="4" y1="11" x2="20" y2="11"/></svg><p>?予瘝?摰?銵?</p></div>';
        return;
    }
    
    // ?曉銵?閬???????    var minHour = 24, maxHour = 0;
    events.forEach(function(e) {
        if (e.hour < minHour) minHour = e.hour;
        var endHour = e.hour + Math.ceil(e.duration);
        if (endHour > maxHour) maxHour = endHour;
    });
    
    // ?游?蝭?????撠?
    minHour = Math.max(0, minHour - 1);
    maxHour = Math.min(24, maxHour + 1);
    
    // 撱箇???-鈭辣撠銵剁??寧??????
    var hourEvents = {};
    events.forEach(function(event) {
        if (!hourEvents[event.hour]) hourEvents[event.hour] = [];
        hourEvents[event.hour].push(event);
    });
    
    var HOUR_HEIGHT = 80; // 瘥??摰?摨?80px
    var html = '';
    
    for (var h = minHour; h < maxHour; h++) {
        var hourEvts = hourEvents[h] || [];
        var eventsHtml = hourEvts.map(function(evt) {
            var icon = ICONS[evt.icon] || '';
            var descHtml = evt.desc ? '<div class="event-desc">' + evt.desc.replace(/\\n/g, '<br>') + '</div>' : '';
            var endHour = evt.hour + evt.duration;
            var endMinute = Math.floor((endHour % 1) * 60);
            var timeDetail = formatHour(evt.hour) + ' - ' + formatHour(Math.floor(endHour)) + ':' + (endMinute < 10 ? '0' : '') + (endMinute || '00');
            
            // 蝎曄Ⅱ閮??∠?擃漲嚗uration ? 瘥???摨?- ??
            var cardHeight = (evt.duration * HOUR_HEIGHT) - 20; // 皜 margin
            var heightStyle = ' style="height:' + cardHeight + 'px"';
            
            return '<div class="event-card ' + evt.type + '"' + heightStyle + '>' +
                '<div class="event-title-text">' + icon + evt.title + '</div>' +
                '<div class="event-meta">' +
                '<span class="event-time-detail">' + ICONS.clock + timeDetail + '</span>' +
                '<span class="event-tag">' + evt.tag + '</span>' +
                '</div>' +
                descHtml +
                '</div>';
        }).join('');
        
        html += '<div class="hour-block">' +
            '<div class="hour-time">' + formatHour(h) + '</div>' +
            '<div class="hour-line">' +
            '<div class="hour-dot"></div>' +
            eventsHtml +
            '</div></div>';
    }
    
    container.innerHTML = '<div class="hourly-schedule">' + html + '</div>';
}

var currentScheduleDay = 0;

function showScheduleDay(dayIndex) {
    currentScheduleDay = dayIndex;
    document.getElementById('schedule-day-num').textContent = dayIndex + 1;
    document.getElementById('schedule-current-date').textContent = DAY_INFO[dayIndex].date;
    
    document.querySelectorAll('.week-day').forEach(function(day, idx) {
        day.classList.toggle('active', idx === dayIndex);
    });
    
    var activeDay = document.querySelector('.week-day.active');
    if (activeDay) {
        activeDay.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'center'});
    }
    
    renderHourlySchedule(dayIndex);
}

document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.week-day').forEach(function(day) {
        day.addEventListener('click', function() {
            var dayIndex = parseInt(this.getAttribute('data-day'));
            showScheduleDay(dayIndex);
        });
    });
    
    renderHourlySchedule(0);
});


var touchStartX = 0;
var touchEndX = 0;

function jumpToToday() {
    showScheduleDay(0);
}

function toggleEventDetails(element) {
    element.classList.toggle('event-expanded');
    element.classList.toggle('event-collapsed');
}

// 皛????交?
if (document.getElementById('schedule-content')) {
    var scheduleContent = document.getElementById('schedule-content');
    
    scheduleContent.addEventListener('touchstart', function(e) {
        touchStartX = e.changedTouches[0].screenX;
    }, {passive: true});
    
    scheduleContent.addEventListener('touchend', function(e) {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipe();
    }, {passive: true});
    
    function handleSwipe() {
        var diff = touchStartX - touchEndX;
        if (Math.abs(diff) > 80) { // ?撠?????            if (diff > 0 && currentScheduleDay < 9) {
                // 撌行? - 銝?憭?                showScheduleDay(currentScheduleDay + 1);
            } else if (diff < 0 && currentScheduleDay > 0) {
                // ?單? - ??憭?                showScheduleDay(currentScheduleDay - 1);
            }
        }
    }
}

// ?嗅????內蝺???Day 1 憿舐內嚗?function updateCurrentTimeLine() {
    var now = new Date();
    var currentHour = now.getHours();
    var currentMinute = now.getMinutes();
    
    if (currentScheduleDay === 0) { // ?芸 Day 1 憿舐內
        var timeInHours = currentHour + (currentMinute / 60);
        var container = document.getElementById('timeline-container');
        var existingLine = container.querySelector('.current-time-line');
        
        if (existingLine) {
            existingLine.remove();
        }
        
        // 蝪∪?嚗?憿舐內?嗅???蝺???舀靘??
    }
}

// ?湔 renderHourlySchedule ? current time line
var originalRenderHourlySchedule = renderHourlySchedule;


var sheetState = 'collapsed'; // collapsed, half, expanded

function toggleBottomSheet() {
    var sheet = document.getElementById('bottom-sheet');
    if (sheetState === 'collapsed') {
        sheetState = 'half';
        sheet.className = 'bottom-sheet half';
    } else if (sheetState === 'half') {
        sheetState = 'expanded';
        sheet.className = 'bottom-sheet expanded';
    } else {
        sheetState = 'collapsed';
        sheet.className = 'bottom-sheet collapsed';
    }
}

// 閫豢皛??舀
var sheetTouchStart = 0;
var sheetTouchCurrent = 0;

document.addEventListener('DOMContentLoaded', function() {
    var sheet = document.getElementById('bottom-sheet');
    var handle = document.querySelector('.sheet-handle-area');
    
    if (sheet && handle) {
        handle.addEventListener('touchstart', function(e) {
            sheetTouchStart = e.touches[0].clientY;
        }, {passive: true});
        
        handle.addEventListener('touchmove', function(e) {
            sheetTouchCurrent = e.touches[0].clientY;
        }, {passive: true});
        
        handle.addEventListener('touchend', function(e) {
            var diff = sheetTouchCurrent - sheetTouchStart;
            
            if (Math.abs(diff) > 50) {
                if (diff > 0) {
                    // ??皛?                    if (sheetState === 'expanded') {
                        sheetState = 'half';
                        sheet.className = 'bottom-sheet half';
                    } else if (sheetState === 'half') {
                        sheetState = 'collapsed';
                        sheet.className = 'bottom-sheet collapsed';
                    }
                } else {
                    // ??皛?                    if (sheetState === 'collapsed') {
                        sheetState = 'half';
                        sheet.className = 'bottom-sheet half';
                    } else if (sheetState === 'half') {
                        sheetState = 'expanded';
                        sheet.className = 'bottom-sheet expanded';
                    }
                }
            }
            
            sheetTouchStart = 0;
            sheetTouchCurrent = 0;
        });
    }
});

function showDay(i) {
    showScheduleDay(i);
}

var ICONS = {
    'plane': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 10h4a2 2 0 0 1 0 4h-4l-4 7h-3l2 -7h-4l-2 2h-3l2 -4l-2 -4h3l2 2h4l-2 -7h3z"/></svg>',
    'plane-arrival': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 12h5a2 2 0 0 1 0 4h-15l-3 6h-2l2 -8h-2l-2 2h-2l2 -4l-2 -4h2l2 2h2l-2 -8h2l3 6h10a2 2 0 0 1 0 4h-5z"/></svg>',
    'home': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12l-2 0l9 -9l9 9l-2 0l0 7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"/></svg>',
    'briefcase': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 7m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"/><path d="M8 7v-2a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v2"/><path d="M12 12l0 .01"/><path d="M3 13a20 20 0 0 0 18 0"/></svg>',
    'bowl': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 8h16a1 1 0 0 1 1 1v.5c0 1.5 -2.517 5.573 -4 6.5v1a1 1 0 0 1 -1 1h-8a1 1 0 0 1 -1 -1v-1c-1.687 -1.054 -4 -5 -4 -6.5v-.5a1 1 0 0 1 1 -1z"/><path d="M12 4a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"/></svg>',
    'confetti': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 5h2"/><path d="M5 4v2"/><path d="M11.5 4l-.5 2"/><path d="M18 5h2"/><path d="M19 4v2"/><path d="M15 9l-1 1"/><path d="M18 13l2 -.5"/><path d="M18 19h2"/><path d="M19 18v2"/><path d="M14 16.518l-6.518 -6.518l-4.39 9.58a1 1 0 0 0 1.329 1.329l9.579 -4.39z"/></svg>',
    'lantern': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 2h6l3 7l-3 7h-6l-3 -7z"/><path d="M12 16v4"/><path d="M10 20h4"/></svg>',
    'mountain': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 20h18l-6.921 -14.612a2.3 2.3 0 0 0 -4.158 0l-6.921 14.612z"/><path d="M7.5 11l2 2.5l2.5 -2.5l2 3l2.5 -2"/></svg>',
    'car': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="7" cy="17" r="2"/><circle cx="17" cy="17" r="2"/><path d="M5 17h-2v-6l2 -5h9l4 5h1a2 2 0 0 1 2 2v4h-2m-4 0h-6m-6 -6h15m-6 0v-5"/></svg>',
    'church': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 21h18"/><path d="M10 21v-4a2 2 0 0 1 2 -2h0a2 2 0 0 1 2 2v4"/><path d="M10 5l2 -2l2 2"/><path d="M6 21v-7m-2 2l8 -8l8 8m-2 -2v7"/></svg>',
    'shopping-bag': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6.331 8h11.339a2 2 0 0 1 1.977 2.304l-1.255 8.152a3 3 0 0 1 -2.966 2.544h-6.852a3 3 0 0 1 -2.965 -2.544l-1.255 -8.152a2 2 0 0 1 1.977 -2.304z"/><path d="M9 11v-5a3 3 0 0 1 6 0v5"/></svg>',
    'world': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="9"/><path d="M3.6 9h16.8"/><path d="M3.6 15h16.8"/><path d="M11.5 3a17 17 0 0 0 0 18"/><path d="M12.5 3a17 17 0 0 1 0 18"/></svg>',
    'building-monument': '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 19h14a2 2 0 0 0 2 -2v-10a2 2 0 0 0 -2 -2h-14a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2z"/><path d="M6 16h12"/><path d="M9 5v-2"/><path d="M15 5v-2"/><path d="M9 19v2"/><path d="M15 19v2"/><path d="M4 8h16"/></svg>'
};

var DAY_INFO = [
    {date: 'Feb 23, 2026', day: 'Monday'},
    {date: 'Feb 24, 2026', day: 'Tuesday'},
    {date: 'Feb 25, 2026', day: 'Wednesday'},
    {date: 'Feb 26, 2026', day: 'Thursday'},
    {date: 'Feb 27, 2026', day: 'Friday'},
    {date: 'Feb 28, 2026', day: 'Saturday'},
    {date: 'Mar 1, 2026', day: 'Sunday'},
    {date: 'Mar 2, 2026', day: 'Monday'},
    {date: 'Mar 3, 2026', day: 'Tuesday'},
    {date: 'Mar 4, 2026', day: 'Wednesday'}
];

var currentScheduleDay = 0;



var D=[{cn:"皜?撅?銋頝舐??",kr:"麮原?????諢?穈鴔???,cat:"蝢?",note:"??單?行僖憌?,hours:"08:00-22:00",zone:"??/?曇楝",lat:37.566,lon:126.99,must:"??嚗惇?僖憌胯?僖憌?,price:"??0,000-15,000"},{cn:"?急鞎??擗?摰?摨?,kr:"?圉?貒篣諿木????筏??,cat:"?拙?擗?,note:"?典之???,hours:"08:00-18:00",zone:"??/?曇楝",lat:37.579,lon:126.986,must:"敹?嚗之???扒瘝寡絲?豢??,price:"??,000-12,000"},{cn:"?唬??芣?皝???摨?,kr:"???月???諈???,cat:"蝢?",note:"撱箄降?厭撌?,hours:"24撠?",zone:"??/?曇楝",lat:37.565,lon:126.987,must:"??嚗?撉券瞈僖",price:"??2,000-15,000"},{cn:"?∪撅?,kr:"諡湊筋??,cat:"蝢?",note:"12:00?閮?",hours:"11:30-21:00",zone:"??/?曇楝",lat:37.578,lon:126.981,must:"敹?嚗?擳畦?絲擙桃畦???畦",price:"??5,000-25,000"},{cn:"????熊 撣輒摨?,kr:"魽域※儦澎筏???痍??,cat:"蝢?",hours:"10:00-21:30",zone:"??/?曇楝",lat:37.562,lon:126.975,must:"??嚗?撌亙??熊??摮?,price:"??,000-13,000"},{cn:"鞊砌?摮蝑?,kr:"?潰??篣",cat:"蝢?",note:"撘之蝡????,hours:"14:00-02:00",zone:"撘之/撱嗅?",lat:37.556,lon:126.926,must:"敹?嚗悅?支??梯??惇?貉?",price:"??5,000-20,000/鈭?},{cn:"璈?蝑",kr:"窱??骨",cat:"蝢?",note:"?曹??砌?",hours:"16:00-23:30",zone:"瞍Ｗ?/璇冽陸??,lat:37.526,lon:127.001,must:"??嚗?恍??葡",price:"??,000-6,000/銝?},{cn:"JO & DAWSON",kr:"魽域?",cat:"???",note:"?衣?撣???",hours:"12:00-21:00",zone:"撘之/撱嗅?",lat:37.564,lon:126.923,must:"敹?嚗蝟?銝毀?臬?韏瑕??",price:"??,000-15,000"},{cn:"???銋頝臬?",kr:"?禺?鴔 ??諢?",cat:"蝢?",note:"?敺?擗?1:00",hours:"16:00-02:00",zone:"??/?曇楝",lat:37.566,lon:126.999,must:"?刻嚗???擗?,price:"??8,000-25,000"},{cn:"樴??? ?偌摨?,kr:"?拖?? ?桿???,cat:"蝢?",note:"?敺?擗?1:00",hours:"16:00-22:00",zone:"?偌瘣?,lat:37.544,lon:127.057,must:"敹?嚗獄颲???偌?桃???,price:"??5,000-25,000"},{cn:"????,kr:"鮈??,cat:"蝢?",note:"?楝銝?蝡?,hours:"14:00-23:30",zone:"??/?曇楝",lat:37.573,lon:126.99,must:"??嚗?????鈭",price:"??0,000-50,000/鈭?},{cn:"摮怠振??",kr:"???月??謔?,cat:"蝢?",note:"?梯???摨?,hours:"11:00-22:00",zone:"??/?曇楝",lat:37.574,lon:127.021,must:"敹?嚗??駁???",price:"??5,000-30,000"},{cn:"蝯梁??貊??,kr:"?蛙?窱渥?",cat:"蝢?",note:"摮????",hours:"11:00-22:00",zone:"瘙撜?,lat:37.527,lon:126.924,must:"??嚗?∟憟?",price:"??5,000-40,000"},{cn:"?∪撅??偌摨?,kr:"諡湊筋???桿???,cat:"蝢?",note:"?偌蝡?摨?,hours:"11:30-21:00",zone:"?偌瘣?,lat:37.545,lon:127.059,must:"敹?嚗?擳畦???畦",price:"??5,000-25,000"},{cn:"瞍Ｗ?瘣收?渲?爸皝?,kr:"?????",cat:"蝢?",note:"敹???",hours:"24撠?",zone:"瞍Ｗ?/璇冽陸??,lat:37.531,lon:126.997,must:"??嚗收?渲?爸皝?,price:"??2,000-20,000"},{cn:"Parole & Langue",kr:"?﹞?月?篞?,cat:"???",note:"憛????梢?摨?,hours:"13:00-21:00",zone:"撘之/撱嗅?",lat:37.565,lon:126.923,must:"敹?嚗偌???概??憛?,price:"??,000-15,000"},{cn:"Butty銝?瘝?,kr:"貒????",cat:"???",note:"撌批毀???祥",hours:"11:00-19:00",zone:"撘之/撱嗅?",lat:37.556,lon:126.901,must:"??嚗概撌湧?銝?瘝?,price:"??,000-12,000"},{cn:"擐砍控?扒憟園?敼???,kr:"諤?坐?筋麆?,cat:"蝢?",note:"?典???摨?,hours:"11:00-22:00",zone:"瞍Ｗ?/璇冽陸??,lat:37.55,lon:126.98,must:"敹?嚗麾?賊?敼?",price:"??5,000-50,000"},{cn:"hetras ?偌",kr:"?欠?潰 ?桿?",cat:"鞈潛",note:"?刻No.29,No.7,No.5",hours:"11:00-20:00",zone:"?偌瘣?,lat:37.541,lon:127.06,must:"敹眺嚗?瘞就o.29?o.7?o.5",price:"??0,000-150,000"},{cn:"newmix coffee",kr:"?渠笆?木誘??,cat:"???",note:"敹眺?單熄?隡湔?蝳?,hours:"11:00-20:00",zone:"?偌瘣?,lat:37.541,lon:127.06,must:"敹眺嚗皞嗅??∠旨??,price:"??5,000-35,000"},{cn:"ADERERROR ?偌",kr:"?? ?桿? ?欠??渥",cat:"?ˇ",note:"?璁艙摨?,hours:"13:00-21:00",zone:"?偌瘣?,lat:37.536,lon:127.054,must:"?刻嚗??碌ogo銵﹝",price:"??00,000-400,000"},{cn:"BLUE ELEPHANT ?偌",kr:"賳ㄗ?收????桿?",cat:"?ˇ",note:"撟喳憓券??",hours:"11:00-20:00",zone:"?偌瘣?,lat:37.541,lon:127.057,must:"敹眺嚗像?孵云?賜??,price:"??5,000-60,000"},{cn:"fwee Agit",kr:"??????,cat:"敶拙?",note:"敹眺撣??野",hours:"11:00-21:00",zone:"?偌瘣?,lat:37.543,lon:127.054,must:"敹眺嚗?銝?瘜乓?瞉文???,price:"??5,000-30,000"},{cn:"DIOR ?偌",kr:"? ?桿?",cat:"?舫?",note:"?梢??唳??",hours:"11:00-20:00",zone:"?偌瘣?,lat:37.544,lon:127.053,must:"??暺?,price:"?祥?亙"},{cn:"NYUNYU ?偌",kr:"?渠 ?桿?",cat:"?ˇ",note:"憌曉?鞈潛?",hours:"11:00-23:00",zone:"?偌瘣?,lat:37.545,lon:127.056,must:"敹眺嚗?蝟駁ˇ?喟",price:"??0,000-50,000"},{cn:"?虛絕 ?偌",kr:"?虛絕?欠????桿?",cat:"?貊",note:"?暑?貊摨?,hours:"11:00-21:00",zone:"?偌瘣?,lat:37.541,lon:127.057,must:"?刻嚗??琿?鞎具?瘞???,price:"??0,000-80,000"},{cn:"KODAK ?勗之?",kr:"儠?渣????諡?,cat:"?ˇ",note:"雿DunDun 2璅?,hours:"10:30-22:00",zone:"??/?曇楝",lat:37.569,lon:127.011,must:"敹眺嚗儔?日◢憭??蜇T",price:"??0,000-150,000"},{cn:"ept ?偌",kr:"?渣???桿?",cat:"?ˇ",note:"???梢?????,hours:"11:00-20:00",zone:"?偌瘣?,lat:37.541,lon:127.06,must:"敹眺嚗???????,price:"??00,000-200,000"},{cn:"HAUS NOWHERE",kr:"????賄??,cat:"?貊",note:"??璅?,hours:"11:00-21:00",zone:"?偌瘣?,lat:37.541,lon:127.059,must:"?刻嚗身閮葦???ˇ",price:"??0,000-300,000"},{cn:"thisisneverthat",kr:"??渥??月???,cat:"?ˇ",note:"銵瞏格?蝚砌?蝡?,hours:"12:00-21:00",zone:"撘之/撱嗅?",lat:37.552,lon:126.92,must:"敹眺嚗??剜蔭瘚?扎?銵?,price:"??0,000-200,000"},{cn:"KITH 擐",kr:"?木 ?",cat:"?ˇ",note:"瞏格???",hours:"11:00-20:00",zone:"?偌瘣?,lat:37.541,lon:127.06,must:"?刻嚗??摰狡",price:"??00,000-500,000"},{cn:"HUMAN MADE",kr:"?渠釆諰??,cat:"?ˇ",note:"?梢?瞏桃?",hours:"11:00-20:00",zone:"?偌瘣?,lat:37.541,lon:127.054,must:"敹眺嚗??豢?敹ogo",price:"??50,000-400,000"},{cn:"MUSINSA EMPTY",kr:"諡渥???????,cat:"?貊",note:"憭批??詨?摨?,hours:"11:00-20:00",zone:"?偌瘣?,lat:37.536,lon:127.054,must:"?刻嚗??身閮葦??",price:"??0,000-300,000"},{cn:"皜偌??,kr:"麮原???,cat:"???",note:"??瘣姘?",hours:"11:30-22:00",zone:"??/?曇楝",lat:37.574,lon:126.991,must:"敹?嚗姘?漣雿????鞊畦",price:"??,000-15,000"},{cn:"YM Coffee House",kr:"YM儢欠???,cat:"???",note:"??憸冽撠平??",hours:"12:00-22:00",zone:"擐撣?",lat:37.62,lon:126.917,must:"?刻嚗?瘝???,price:"??,000-12,000"},{cn:"Cafe Layered 撱嗅?摨?,kr:"儦渣? ??渠? ?圉??,cat:"???",note:"?詨熒??",hours:"11:00-22:00",zone:"撘之/撱嗅?",lat:37.565,lon:126.924,must:"敹?嚗摨瑯扒瘝孵摨?,price:"??,000-10,000"},{cn:"Thanks Oat 撱嗅?",kr:"?∫?欠 ?圉",cat:"???",note:"撱嗅?瘣?撌亙??,hours:"10:00-19:00",zone:"撘之/撱嗅?",lat:37.565,lon:126.921,must:"敹?嚗?撌亙?潦?暻亦?",price:"??,000-15,000"},{cn:"隞予銋雲憭?,kr:"?月??隆賱",cat:"???",note:"?曹??砌?",hours:"12:00-20:00",zone:"撘之/撱嗅?",lat:37.56,lon:126.925,must:"?刻嚗?蝟?撌亦?暺?,price:"??,000-15,000"},{cn:"蝝郭??,kr:"????,cat:"???",note:"???嗅恕",hours:"11:00-20:00",zone:"??/?曇楝",lat:37.58,lon:126.981,must:"敹?嚗蝯梢??嗚??,price:"??0,000-18,000"},{cn:"Artist Bakery",kr:"??欠 貒儢月收",cat:"???",note:"暽賢????摨?,hours:"08:00-20:00",zone:"??/?曇楝",lat:37.576,lon:126.984,must:"敹?嚗厭?舫?",price:"??,000-8,000"},{cn:"29CM ?偌",kr:"?湊筋?桿?",cat:"?貊",note:"蝺??詨?撖阡?摨?,hours:"11:00-20:00",zone:"?偌瘣?,lat:37.545,lon:127.053,must:"?刻嚗??身閮葦??",price:"??0,000-200,000"},{cn:"Ground Seesaw 镼踵?",kr:"篞賈?渠??? ??",cat:"撅汗",note:"鞈芣?撅汗蝛粹?",hours:"10:00-19:00",zone:"??/?曇楝",lat:37.578,lon:126.973,must:"?刻嚗??閬?,price:"??5,000-20,000"},{cn:"撱??撣 156??,kr:"窵? 156??,cat:"?疏",note:"鞈潸眺??鋆賣?鋡?,hours:"09:00-18:00",zone:"??/?曇楝",lat:37.57,lon:127,must:"敹眺嚗??ˊ?極璉◤",price:"??00,000-500,000"},{cn:"Cociety 擐??,kr:"儠?渥?????,cat:"撌乩??",note:"?菜?撌乩?蝛粹?(?曹?隡?",hours:"12:00-20:00",zone:"?偌瘣?,lat:37.556,lon:127.043,must:"?刻嚗??～?暺?,price:"??,000-12,000"},{cn:"Brautor",kr:"賳?堅",cat:"撌乩??",note:"?渲擗?摨?,hours:"08:00-22:00",zone:"?偌瘣?,lat:37.549,lon:127.045,must:"敹?嚗?園?",price:"??,000-12,000"},{cn:"Debunk",kr:"????,cat:"撌乩??",note:"?唬?撅方??豢???,hours:"10:00-23:00",zone:"撘之/撱嗅?",lat:37.548,lon:126.915,must:"?刻嚗???,price:"??,000-10,000"},{cn:"Hollys Coffee 撘之蝡?,kr:"?收?????原?",cat:"撌乩??",note:"24撠?",hours:"24撠?",zone:"撘之/撱嗅?",lat:37.556,lon:126.923,must:"?刻嚗?撘???,price:"??,000-12,000"},{cn:"Ediya Coffee Lab",kr:"?渠??潰誘?潺",cat:"撌乩??",note:"?摨?,hours:"07:30-02:00",zone:"瘙?",lat:37.511,lon:127.033,must:"?刻嚗??～?暺?,price:"??,000-10,000"},{cn:"Terarosa POSCO",kr:"?諢 ?科儠?域?",cat:"撌乩??",note:"?潮?豢??,hours:"07:30-21:00",zone:"瘙?",lat:37.506,lon:127.056,must:"?刻嚗?瘝???,price:"??,000-15,000"},{cn:"1鈭???,kr:"1鈭???,cat:"???",note:"蝯??唳",hours:"11:00-21:00",zone:"?拙像?",lat:37.641,lon:126.938},{cn:"Dotom",kr:"Dotom",cat:"蝢?",note:"?典鈭箔??剖??????方?摨?,hours:"17:00-23:00",zone:"撱箏之/撱?揖?",lat:37.556,lon:127.078,must:"?刻嚗??,price:"??0,000-30,000/鈭?},{cn:"?匱窱原?貐渥?",kr:"?潺站謔科?儦澎筏?陷??,cat:"蝢?",note:"??????熊",hours:"11:00-22:00",zone:"?偌瘣?,lat:37.549,lon:127.045,must:"敹?嚗??????熊",price:"??2,000-18,000"},{cn:"?芰撜園厭暻萄?",kr:"Jayeondo Sogeumppang",cat:"???",note:"暽賡熊??摨?,hours:"08:00-20:00",zone:"?偌瘣?,lat:37.542,lon:127.055,must:"敹眺嚗厭暻萄?",price:"??,000-5,000"},{cn:"Kyewol Gomtang",kr:"Kyewol Gomtang",cat:"蝢?",note:"皝舫ㄞ",hours:"24撠?",zone:"?偌瘣?,lat:37.54,lon:127.048,must:"??嚗?撉冽僖憌?,price:"??0,000-13,000"},{cn:"Thweet Seongsu",kr:"Thweet Seongsu",cat:"???",note:"憡ㄚ敹瘛?",hours:"13:00-22:00",zone:"?偌瘣?,lat:37.545,lon:127.052,must:"敹?嚗?憯怠??唳?瘛?,price:"??,000-12,000"},{cn:"MilkyShop Seongsu",kr:"MilkyShop Seongsu Store",cat:"鞈潛",note:"?衣?憟嗆硃擗嗾隡湔?蝳?,hours:"11:00-20:00",zone:"?偌瘣?,lat:37.544,lon:127.051,must:"敹眺嚗蝟扒瘝寥?銋?,price:"??2,000-18,000"},{cn:"蟡銝誨擐祇?舀?撉冽僖",kr:"?爰???桿? 穈???,cat:"蝢?",note:"24撠??平",hours:"24撠?",zone:"?偌瘣?,lat:37.543,lon:127.054,must:"??嚗收?渲?爸皝?,price:"??3,000-18,000"},{cn:"29cm.home",kr:"29cm.home",cat:"?貊",note:"鞈芣?摰嗅??貊摨?gelato",hours:"12:00-21:00",zone:"?偌瘣?,lat:37.543,lon:127.056,must:"?刻嚗?敹?gelato?身閮??,price:"??,000-50,000"},{cn:"LOE SEONGSU",kr:"諢? ?桿?",cat:"鞈潛",note:"??撠??擐偌 ?祥?餃?",hours:"11:00-20:00",zone:"?偌瘣?,lat:37.542,lon:127.056,must:"敹眺嚗??暸?瘞氬?鞎餃摮???,price:"??0,000-120,000"},{cn:"Standard Bread",kr:"Standard Bread",cat:"???",note:"?菟??衣?瘜??",hours:"08:00-19:00",zone:"?偌瘣?,lat:37.542,lon:127.061,must:"敹?嚗?蝟?撘???,price:"??,000-15,000"},{cn:"Neungdong Minari",kr:"Neungdong Minari Seongsu",cat:"蝢?",note:"Hebe?望絲靘???,hours:"10:00-22:00",zone:"?偌瘣?,lat:37.543,lon:127.054,must:"??嚗偌?寧?撉冽僖",price:"??2,000-15,000"},{cn:"STAFF PICKS",kr:"STAFF PICKS",cat:"???",note:"蝢??∪輒",hours:"10:00-21:00",zone:"擐撣?",lat:37.577,lon:126.968},{cn:"Milestone Coffee",kr:"Milestone Coffee Hannam",cat:"???",note:"瞍Ｗ?瘣蔭瘚?",hours:"09:00-20:00",zone:"瞍Ｗ?/璇冽陸??,lat:37.538,lon:127.003},{cn:"COFFEE & CIGARETTES",kr:"COFFEE & CIGARETTES",cat:"???",note:"17璅?蝛箏???,hours:"11:00-23:00",zone:"??/?曇楝",lat:37.563,lon:126.974},{cn:"Blue Bottle 銝?",kr:"Blue Bottle Samcheong Cafe",cat:"???",note:"憸冽敺末",hours:"08:00-20:00",zone:"銝?瘣?,lat:37.58,lon:126.981},{cn:"諨?MUUT",kr:"諨??桿? ??篞賄 ?欠???,cat:"?貊",note:"閮剛???",hours:"12:00-21:00",zone:"?偌瘣?,lat:37.541,lon:127.06},{cn:"???曆誨蝢?擗?,kr:"???曆誨蝢?擗?擐 MMCA",cat:"撅汗",note:"???嗡誨???擃挪??,hours:"10:00-18:00",zone:"銝?瘣?,lat:37.579,lon:126.98,must:"?刻嚗??閬?,price:"??,000-10,000"},{cn:"擐撣?蝢?擗?,kr:"擐撣?蝢?擗?,cat:"撅汗",note:"蝢?擗?,hours:"10:00-20:00",zone:"??/?曇楝",lat:37.564,lon:126.974},{cn:"?憌?",kr:"?憌?",cat:"蝢?",note:"蝐喳??霅??祈摰?",hours:"11:00-22:00",zone:"擐撣?",lat:37.551,lon:126.956,must:"??嚗?孵?憌?,price:"??5,000/鈭?},{cn:"Ground Seesaw Central",kr:"Ground Seesaw Central",cat:"撅汗",note:"撅汗蝛粹?",hours:"11:00-19:00",zone:"擐撣?",lat:37.558,lon:126.974},{cn:"Musinsa Standard",kr:"Musinsa Standard Seongsu",cat:"?ˇ",note:"??uniqlo 靘踹??潛銵?,hours:"11:00-21:00",zone:"?偌瘣?,lat:37.542,lon:127.059,must:"敹眺嚗?梯﹝??祆狡",price:"??0,000-50,000"},{cn:"Malbang Gukbap",kr:"Malbang Gukbap - Seongsu",cat:"蝢?",note:"皝舫ㄞ",hours:"08:00-21:00",zone:"?偌瘣?,lat:37.548,lon:127.064,must:"??嚗僖憌?,price:"??,000-12,000"},{cn:"papier prost",kr:"??渣?諢??,cat:"鞈潛",note:"?摨?,hours:"12:00-20:00",zone:"镼踵?",lat:37.58,lon:126.969},{cn:"??撣",kr:"??撣",cat:"?舫?",note:"?臭誑鞎瑕?????,hours:"09:00-19:00",zone:"镼踵?",lat:37.581,lon:126.971},{cn:"arkisto",kr:"?打?木??,cat:"鞈潛",note:"??銝璇?",hours:"11:00-20:00",zone:"镼踵?",lat:37.582,lon:126.972},{cn:"MONOHA Seochon",kr:"諈刺????",cat:"鞈潛",note:"?????,hours:"11:00-20:00",zone:"镼踵?",lat:37.58,lon:126.972},{cn:"憭扳?蝢?擗?,kr:"憭扳?蝢?擗?,cat:"撅汗",note:"?蔣撅?銵尹",hours:"11:00-19:00",zone:"镼踵?",lat:37.578,lon:126.973},{cn:"Dancing grandma",kr:"Dancing grandma",cat:"鞈潛",note:"????,hours:"12:00-18:00",zone:"镼踵?",lat:37.578,lon:126.971},{cn:"SOLSOT",kr:"SOLSOT",cat:"蝢?",note:"?ㄞ",hours:"11:30-21:00",zone:"镼踵?",lat:37.578,lon:126.971,must:"??嚗?憌?,price:"??2,000-18,000"},{cn:"ETC Seoul Seochon",kr:"ETC Seoul Seochon",cat:"?貊",note:"?詨?摨?,hours:"12:00-20:00",zone:"镼踵?",lat:37.577,lon:126.969},{cn:"Folki",kr:"Folki",cat:"???",note:"瞍漁?撱?,hours:"10:00-21:00",zone:"镼踵?",lat:37.576,lon:126.969},{cn:"PIZZA SLICE SEOUL",kr:"PIZZA SLICE SEOUL",cat:"蝢?",note:"?怨",hours:"12:00-22:00",zone:"?偌瘣?,lat:37.543,lon:127.062,must:"?刻嚗?拍?",price:"??,000-8,000"},{cn:"AIRDROP COFFEE",kr:"AIRDROP COFFEE SEONGSU",cat:"???",note:"?偌?",hours:"09:00-20:00",zone:"?偌瘣?,lat:37.544,lon:127.055},{cn:"Downtowner Anguk",kr:"Downtowner Anguk",cat:"蝢?",note:"?芣◢瞍Ｗ",hours:"11:00-21:00",zone:"摰?/銝?",lat:37.577,lon:126.986,must:"??嚗璇冽慰??,price:"??2,000-16,000"},{cn:"Anthracite Coffee 撘之",kr:"?欠?科?渣 ??",cat:"撌乩??",note:"撌交平憸典之蝛粹?",hours:"10:00-23:00",zone:"撘之/撱嗅?",lat:37.556,lon:126.925,must:"?刻嚗?摨批?頞喋iFi蝛拙?",price:"??,000-12,000"},{cn:"Mmmg Cafe 撘之",kr:"??篣?儦渣?",cat:"撌乩??",note:"銝惜璅蝡征??,hours:"11:00-22:00",zone:"撘之/撱嗅?",lat:37.557,lon:126.924,must:"?刻嚗?撅斗?????,price:"??,000-10,000"},{cn:"Starbucks Reserve 瘙?",kr:"?欠?貒 謔科?賳?穈",cat:"撌乩??",note:"擃?摰?",hours:"07:00-22:00",zone:"瘙?",lat:37.508,lon:127.062,must:"?刻嚗?璆剖極雿???,price:"??,000-15,000"},{cn:"Fritz Coffee ??鈭?,kr:"?有鼽誘???筋??,cat:"撌乩??",note:"蝎曉??",hours:"09:00-21:00",zone:"?唳?/??鈭?,lat:37.527,lon:127.036,must:"?刻嚗?嗅??雲",price:"??,000-15,000"},{cn:"Coffee Libre 瘙?",kr:"儢欠謔禺???穈",cat:"撌乩??",note:"撠平?撣?,hours:"10:00-22:00",zone:"瘙?",lat:37.505,lon:127.025,must:"?刻嚗?撠???,price:"??,000-12,000"},{cn:"Daelim Changgo ?澈",kr:"?謔潰偷窸?,cat:"撌乩??",note:"頞之?澈?孵遣",hours:"10:00-19:00",zone:"??/?曇楝",lat:37.582,lon:126.968,must:"?刻嚗?摨扯?憭??極雿?,price:"??,000-15,000"},{cn:"Nudake ??鈭?,kr:"??渣 ?筋??,cat:"撌乩??",note:"蝪∠???憸?,hours:"10:00-22:00",zone:"?唳?/??鈭?,lat:37.523,lon:127.029,must:"?刻嚗?暺??,price:"??,000-15,000"},{cn:"Onion ??瘣?,kr:"?渠????蛙???,cat:"撌乩??",note:"???孵遣敺拙憸?,hours:"10:00-22:00",zone:"??/?曇楝",lat:37.571,lon:126.991,must:"?刻嚗??喟征??,price:"??,000-15,000"},{cn:"Cafe Layered ??",kr:"儦渣? ??渠? 賱?",cat:"撌乩??",note:"憭惜?賊?蝛粹?",hours:"11:00-22:00",zone:"??/?曇楝",lat:37.582,lon:126.986,must:"?刻嚗??極雿?,price:"??,000-12,000"},{cn:"WeWork 瘙?",kr:"????穈",cat:"撌乩??",note:"?曹澈颲血 Day Pass",hours:"24撠?",zone:"瘙?",lat:37.498,lon:127.028,must:"?刻嚗?霅啣恕???雯頝?,price:"??5,000-35,000"},{cn:"FastFive 撘之",kr:"?到?貲??渠? ??",cat:"撌乩??",note:"???砍??曹澈蝛粹?",hours:"24撠?",zone:"撘之/撱嗅?",lat:37.555,lon:126.922,must:"?刻嚗?WeWork靘踹?",price:"??0,000"},{cn:"FastFive 瘙?",kr:"?到?貲??渠? 穈",cat:"撌乩??",note:"???砍??曹澈蝛粹?",hours:"24撠?",zone:"瘙?",lat:37.502,lon:127.036,must:"?刻嚗身????,price:"??0,000"},{cn:"Sparkplus 擐",kr:"?欠??秒??科",cat:"撌乩??",note:"憭?暺??扳獢?,hours:"24撠?",zone:"擐撣?",lat:37.565,lon:126.977,must:"?刻嚗?蝙??,price:"??0,000-30,000"},{cn:"Starbucks ??摨?,kr:"?欠?貒 諈???,cat:"撌乩??",note:"擛批?銝剔?摰?閫",hours:"07:00-22:00",zone:"??/?曇楝",lat:37.563,lon:126.984,must:"?刻嚗?蝵桀???齒??,price:"??,000-12,000"},{cn:"Ediya Coffee ??蝡?,kr:"?渠??潰誘??諈??原?",cat:"撌乩??",note:"撟喳????漣憭?,hours:"07:30-22:00",zone:"??/?曇楝",lat:37.561,lon:126.986,must:"?刻嚗?蝞????撌乩?",price:"??,000-10,000"},{cn:"Tom N Toms ??",kr:"?? 諈???,cat:"撌乩??",note:"撖祆?蝛粹??拚??撱?,hours:"08:00-23:00",zone:"??/?曇楝",lat:37.562,lon:126.985,must:"?刻嚗銝極雿runch",price:"??,000-15,000"},{cn:"Paul Bassett ??",kr:"?渠???諈???,cat:"撌乩??",note:"蝎曉??撠平??",hours:"08:00-22:00",zone:"??/?曇楝",lat:37.563,lon:126.983,must:"?刻嚗釭?極雿?,price:"??,000-15,000"},{cn:"Angel-in-us Coffee ??",kr:"??謔禺???諈???,cat:"撌乩??",note:"???砍????",hours:"07:00-23:00",zone:"??/?曇楝",lat:37.562,lon:126.984,must:"?刻嚗??祈齒?祇?瘙?,price:"??,000-12,000"},{cn:"Anthracite 銋頝?,kr:"?欠?科?渣 ??諢?",cat:"撌乩??",note:"撌交平憸函雯蝢??∪輒",hours:"10:00-22:00",zone:"??/?曇楝",lat:37.566,lon:127.003,must:"?刻嚗?極雿??",price:"??,000-12,000"},{cn:"Cafe 201 銋頝?,kr:"儦渣?201 ??諢?,cat:"撌乩??",note:"敺拙???撱?,hours:"12:00-22:00",zone:"??/?曇楝",lat:37.565,lon:127.002,must:"?刻嚗??極雿?畾?,price:"??,000-12,000"},{cn:"Layered 銋頝?,kr:"??渠? ??諢?,cat:"撌乩??",note:"蝪∠?憸冽摰??",hours:"11:00-22:00",zone:"??/?曇楝",lat:37.566,lon:127.001,must:"?刻嚗?瘜典極雿?,price:"??,000-12,000"},{cn:"Nudake 撣輒",kr:"??渣 ?痍??,cat:"撌乩??",note:"??蝪∠?憸函?暺末??,hours:"10:00-22:00",zone:"??/?曇楝",lat:37.564,lon:126.976,must:"?刻嚗??拙極雿憓?,price:"??,000-15,000"},{cn:"FastFive ??",kr:"?到?貲??渠? 諈?",cat:"撌乩??",note:"?曹澈颲血 Day Pass",hours:"24撠?",zone:"??/?曇楝",lat:37.559,lon:126.994,must:"?刻嚗?霅啣恕??璆剛身??,price:"??0,000"},{cn:"WeWork ??諢?,kr:"??????諢?,cat:"撌乩??",note:"???齒?祉憓?,hours:"24撠?",zone:"??/?曇楝",lat:37.565,lon:127.005,must:"?刻嚗?霅啣恕?暑?征??,price:"??5,000-35,000"},{cn:"Sparkplus 撣輒",kr:"?欠??秒??科 ?痍",cat:"撌乩??",note:"敶扯齒?祉征??,hours:"24撠?",zone:"??/?曇楝",lat:37.566,lon:126.978,must:"?刻嚗?蝙??,price:"??0,000-30,000"}];
var cat='all',zone='all',q='',map,markers=[],myMarker,mapFilter='all';
var CATS=[{k:'all',l:'?券',i:''},{k:'蝢?',l:'蝢?',i:''},{k:'???',l:'?',i:''},{k:'鞈潛',l:'鞈潛',i:''},{k:'Work',l:'Work',i:''},{k:'雿挪',l:'雿挪',i:''},{k:'?舫?',l:'?舫?',i:''}];
var ZONES=[].concat.apply([],D.map(function(p){return p.zone})).filter(function(v,i,a){return v&&a.indexOf(v)===i}).sort();
var EMO={'蝢?':'??','?拙?擗?:'?','???':'??,'鞈潛':'??儭?,'?ˇ':'??','?貊':'??','敶拙?':'??','?疏':'?','Work':'?','撌乩??':'?','撅汗':'?','雿挪':'??','?舫?':'??'};
function match(c,f){return f==='all'||c===f||(f==='鞈潛'&&['?ˇ','?貊','敶拙?','?疏','鞈潛'].indexOf(c)>=0)||(f==='Work'&&['Work','撌乩??','撅汗'].indexOf(c)>=0)||(f==='???'&&['???','?拙?擗?].indexOf(c)>=0)}
function count(c){return D.filter(function(p){return match(p.cat,c)}).length}

// ===== 閰單?璅⊥?獢???=====
var currentPlaceIndex = -1;
var favoritePlaces = JSON.parse(localStorage.getItem('favoritePlaces') || '[]');

function openPlaceDetail(index) {
    currentPlaceIndex = index;
    var place = D[index];
    
    var modal = document.createElement('div');
    modal.className = 'modal-overlay';
    modal.innerHTML = `
        <div class="modal-content">
            <div class="modal-header">
                <div style="font-size:0.9rem;font-weight:700;color:var(--text)">?圈?閰單?</div>
                <button class="modal-close" onclick="closeModal()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="modal-place-name">${place.cn}</div>
                <div class="modal-place-name-kr">${place.kr}</div>
                <div class="modal-badges">
                    <span class="badge-cat cat-${place.cat}">${place.cat}</span>
                    <span class="badge-zone">${place.zone}</span>
                </div>
                ${place.must ? `
                <div class="must">
                    <div class="must-text">${place.must}</div>
                    ${place.price ? '<div class="price">? ' + place.price + '</div>' : ''}
                </div>
                ` : ''}
                <div class="modal-info-grid">
                    <div class="modal-info-item">
                        <svg class="modal-info-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="9"/><path d="M12 7v5l3 3"/></svg>
                        <div class="modal-info-text">${place.hours || '?平???芣?靘?}</div>
                    </div>
                    ${place.note ? `
                    <div class="modal-info-item">
                        <svg class="modal-info-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 8v4m0 4h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"/></svg>
                        <div class="modal-info-text">${place.note}</div>
                    </div>
                    ` : ''}
                </div>
            </div>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-favorite ${favoritePlaces.includes(index) ? 'active' : ''}" onclick="toggleFavorite(${index})">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="${favoritePlaces.includes(index) ? 'currentColor' : 'none'}" stroke="currentColor" stroke-width="2"><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"/></svg>
                    ${favoritePlaces.includes(index) ? '撌脫?? : '?嗉?'}
                </button>
                <button class="modal-btn modal-btn-navigate" onclick="navigateToPlace(${index})">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v4m0 12v4m10-10h-4M6 12H2"/><circle cx="12" cy="12" r="3"/></svg>
                    撠
                </button>
            </div>
        </div>
    `;
    
    document.body.appendChild(modal);
    setTimeout(function() { modal.classList.add('show'); }, 10);
}

function closeModal() {
    var modal = document.querySelector('.modal-overlay');
    if (modal) {
        modal.classList.remove('show');
        setTimeout(function() { modal.remove(); }, 300);
    }
}

function toggleFavorite(index) {
    var idx = favoritePlaces.indexOf(index);
    if (idx > -1) {
        favoritePlaces.splice(idx, 1);
    } else {
        favoritePlaces.push(index);
    }
    localStorage.setItem('favoritePlaces', JSON.stringify(favoritePlaces));
    
    // ?湔?????    var btn = document.querySelector('.modal-btn-favorite');
    if (btn) {
        btn.classList.toggle('active');
        btn.innerHTML = favoritePlaces.includes(index) ? 
            '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2"><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"/></svg>撌脫?? :
            '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"/></svg>?嗉?';
    }
    
    // ?皜脫??”隞仿＊蝷箸?噬蝡?    draw();
}

function navigateToPlace(index) {
    var place = D[index];
    window.open('https://map.naver.com/p/search/' + encodeURIComponent(place.kr), '_blank');
    closeModal();
}

// 璅⊥?獢????券???document.addEventListener('click', function(e) {
    if (e.target.classList.contains('modal-overlay')) {
        closeModal();
    }
});

// ===== 隞?刻? =====
function getTodayPicks() {
    // 敺???憿璈銝??    var picks = [];
    var categories = ['蝢?', '???', '鞈潛'];
    categories.forEach(function(cat) {
        var items = D.filter(function(p) { return p.cat === cat && p.must; });
        if (items.length > 0) {
            picks.push(items[Math.floor(Math.random() * items.length)]);
        }
    });
    return picks;
}


function draw(){
    var ts=document.getElementById('tabs');
    var zs=document.getElementById('zones');
    var ls=document.getElementById('list');
    var inf=document.getElementById('info');
    ts.innerHTML=CATS.map(function(c){return '<button class="tab'+(cat===c.k?' active':'')+'" onclick="cat=\''+c.k+'\';draw()">'+(c.i?c.i+' ':'')+c.l+'<span class="tab-count">'+count(c.k)+'</span></button>'}).join('');
    zs.innerHTML='<span class="zone-pill'+(zone==='all'?' active':'')+'" onclick="zone=\'all\';draw()">?券?啣?</span>'+ZONES.map(function(z){return '<span class="zone-pill'+(zone===z?' active':'')+'" onclick="zone=\''+z+'\';draw()">'+z+'</span>'}).join('');
    var fs=D.filter(function(p){return match(p.cat,cat)&&(zone==='all'||p.zone===zone)&&(!q||p.cn.toLowerCase().indexOf(q)>=0||p.kr.toLowerCase().indexOf(q)>=0||p.zone.toLowerCase().indexOf(q)>=0)});
    inf.textContent='??'+fs.length+' ?暺?;
    if(fs.length===0){ls.innerHTML='<div class="empty"><div style="font-size:2rem;opacity:0.2;margin-bottom:10px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg></div><p>?曆??啁泵???圈?</p></div>';return}
    ls.innerHTML=fs.map(function(p){
        var qe=encodeURIComponent(p.kr||p.cn);
        var cc='cat-'+p.cat;
        var mh=p.must?'<div class="must"><div class="must-text">'+p.must+'</div>'+(p.price?'<span class="price"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline-block;vertical-align:text-bottom;margin-right:2px"><circle cx="12" cy="12" r="9"/><path d="M14.8 9a2 2 0 0 0 -1.8 -1h-2a2 2 0 0 0 0 4h2a2 2 0 0 1 0 4h-2a2 2 0 0 1 -1.8 -1"/><path d="M12 6v2m0 8v2"/></svg> '+p.price+'</span>':'')+'</div>':'';
        return '<div class="card" onclick="openPlaceDetail(' + D.indexOf(p) + ')">' + 
        (favoritePlaces.includes(D.indexOf(p)) ? '<span class="favorite-badge">?歹? 撌脫??/span>' : '') + 
        '<div class="card-badges"><span class="badge-cat '+cc+'">'+p.cat+'</span><span class="badge-zone">'+p.zone+'</span></div><div class="name-cn">'+p.cn+'</div><div class="name-kr">'+p.kr+'</div><div class="info"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline-block;vertical-align:text-bottom;margin-right:2px"><circle cx="12" cy="12" r="9"/><path d="M12 7v5l3 3"/></svg> '+p.hours+'</div>'+mh+'<div class="actions"><a href="https://www.google.com/maps/search/?api=1&query='+qe+'" target="_blank" class="btn btn-g">Google</a><a href="https://map.naver.com/p/search/'+qe+'" target="_blank" class="btn btn-n">Naver</a></div></div>'
    }).join('')
}
document.getElementById('search').addEventListener('input',function(e){q=e.target.value.toLowerCase().trim();document.getElementById('clear').classList.toggle('show',q.length>0);draw();filterMapBySearch(q)});
function clearSearch(){document.getElementById('search').value='';q='';document.getElementById('clear').classList.remove('show');draw();filterMapBySearch('')}
function toggleSearch(){
    var sw=document.getElementById('search-wrap');
    var si=document.getElementById('search');
    if(!sw.classList.contains('show')){
        sw.classList.add('show');
        setTimeout(function(){sw.classList.add('open')},10);
        setTimeout(function(){si.focus()},300);
    }else{
        sw.classList.remove('open');
        setTimeout(function(){sw.classList.remove('show');clearSearch()},300);
    }
}
function toggleMapFilter(){
    var btn=document.getElementById('map-filter-btn');
    var dropdown=document.getElementById('map-filter-dropdown');
    btn.classList.toggle('open');
    dropdown.classList.toggle('show');
}
// Handle map filter option clicks with event delegation
document.addEventListener('DOMContentLoaded', function() {
    var dropdown = document.getElementById('map-filter-dropdown');
    if (dropdown) {
        dropdown.addEventListener('click', function(e) {
            var option = e.target.closest('.map-filter-option');
            if (option) {
                var value = option.getAttribute('data-value');
                var label = option.getAttribute('data-label');
                // Update button text with the full HTML content of the clicked option
                document.getElementById('map-filter-text').innerHTML = option.innerHTML;
                // Update active state
                document.querySelectorAll('.map-filter-option').forEach(function(o){
                    o.classList.remove('active');
                });
                option.classList.add('active');
                // Close dropdown
                toggleMapFilter();
                // Apply filter
                filterMap(value);
            }
        });
    }
});
document.addEventListener('click',function(e){
    var filter=document.querySelector('.map-filter');
    var dropdown=document.getElementById('map-filter-dropdown');
    var btn=document.getElementById('map-filter-btn');
    if(filter&&!filter.contains(e.target)&&dropdown.classList.contains('show')){
        dropdown.classList.remove('show');
        btn.classList.remove('open');
    }
});
function go(i){
    var pages=document.querySelectorAll('.page');
    var navs=document.querySelectorAll('.nav-item');
    var mw=document.getElementById('map-wrap');
    pages.forEach(function(p){p.classList.remove('active')});
    navs.forEach(function(n,idx){n.classList.toggle('active',idx===i)});
    mw.classList.remove('active');
    if(i===0)pages[0].classList.add('active');
    else if(i===1)pages[1].classList.add('active');
    else if(i===2){mw.classList.add('active');if(!map){initMap()}else{setTimeout(function(){map.invalidateSize()},100)}}
}
function initMap(){
    map=L.map('map',{zoomControl:false}).setView([37.55,127.0],12);
    L.control.zoom({position:'bottomleft'}).addTo(map);
    L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png',{maxZoom:19}).addTo(map);
    D.forEach(function(p,idx){
        if(p.lat&&p.lon){
            var e=EMO[p.cat]||'??';
            var ic=L.divIcon({className:'',html:'<div class="custom-marker marker-'+p.cat+'"><span>'+e+'</span></div>',iconSize:[28,28],iconAnchor:[14,28],popupAnchor:[0,-28]});
            var m=L.marker([p.lat,p.lon],{icon:ic}).bindPopup('<b>'+p.cn+'</b><br><span style="color:#888">'+p.cat+' 繚 '+p.zone+'</span><a href="https://map.naver.com/p/search/'+encodeURIComponent(p.kr)+'" target="_blank" class="popup-nav">Naver 撠</a>');
            m.category=p.cat;
            m.placeData=p;
            m.placeIndex=idx;
            markers.push(m);
            m.addTo(map)
        }
    });
    updateMapList();
}
function updateMapList(){
    var list=document.getElementById('map-list');
    var listDesktop=document.getElementById('map-list-desktop');
    var filtered=D.filter(function(p){return p.lat&&p.lon&&match(p.cat,mapFilter)});
    var sheetCount=document.getElementById('sheet-count');
    if(sheetCount){sheetCount.textContent=filtered.length+'??}
    var content=filtered.map(function(p,idx){
        var gq=encodeURIComponent(p.cn);
        var nq=encodeURIComponent(p.kr);
        var note=p.must||p.cat;
        return '<div class="map-list-item" onclick="focusMarker('+D.indexOf(p)+')">'+
               '<div class="map-item-name">'+p.cn+'</div>'+
               '<div class="map-item-info">'+note+'</div>'+
               '<div class="map-item-links">'+
               '<a href="https://www.google.com/maps/search/?api=1&query='+gq+'" target="_blank" class="map-item-link" onclick="event.stopPropagation()">'+
               '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#4285f4"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>'+
               '</a>'+
               '<a href="https://map.naver.com/p/search/'+nq+'" target="_blank" class="map-item-link" onclick="event.stopPropagation()">'+
               '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#26de81"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>'+
               '</a>'+
               '</div></div>'
    }).join('');
    list.innerHTML=content;
    if(listDesktop){listDesktop.innerHTML=content}
}
function focusMarker(idx){
    var m=markers.find(function(mk){return mk.placeIndex===idx});
    if(m){
        map.setView(m.getLatLng(),15);
        m.openPopup();
        document.querySelectorAll('.map-list-item').forEach(function(item){item.classList.remove('active')});
        var listIdx=D.filter(function(p){return p.lat&&p.lon&&match(p.cat,mapFilter)}).indexOf(D[idx]);
        if(listIdx>=0)document.querySelectorAll('.map-list-item')[listIdx].classList.add('active');
    }
}
function filterMap(f){
    mapFilter=f;
    markers.forEach(function(m){if(match(m.category,f)){m.addTo(map)}else{m.remove()}});
    updateMapList();
}
function locate(){
    if(!navigator.geolocation){alert('銝?游?雿?);return}
    navigator.geolocation.getCurrentPosition(function(pos){
        if(myMarker)myMarker.remove();
        var ic=L.divIcon({className:'',html:'<div class="my-marker"></div>',iconSize:[16,16],iconAnchor:[8,8]});
        myMarker=L.marker([pos.coords.latitude,pos.coords.longitude],{icon:ic}).addTo(map).bindPopup('?? 雿?ㄐ').openPopup();
        map.setView([pos.coords.latitude,pos.coords.longitude],15)
    },function(){alert('?⊥???雿蔭')},{enableHighAccuracy:true})
}
function showDay(idx){
    document.querySelectorAll('.schedule-tab').forEach(function(t,i){t.classList.toggle('active',i===idx)});
    document.querySelectorAll('.schedule-day').forEach(function(d,i){d.classList.toggle('active',i===idx)});
}
draw();
    </script>
</body>
</html>
